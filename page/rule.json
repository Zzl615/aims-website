{
  "type": "page",
  "body": [
    {
      "type": "crud",
      "id": "u:22fd4b9b0750",
      "syncLocation": false,
      "api": {
        "method": "get",
        "url": "/api/aio-program/task_rule/list",
        "messages": {
        },
        "requestAdaptor": "console.log('api', api);\nif (api.method === 'get') {\n    for (let key in api.query) {\n        if (api.query[key] === '') {\n            delete api.query[key];\n        } else {\n            console.log('api.query.' + key, api.query[key]);\n        }\n    }\n    api.url = api.url.split('?')[0] + '?' + new URLSearchParams(api.query);\n}\n\nreturn api;\n",
        "adaptor": ""
      },
      "columns": [
        {
          "label": "名称",
          "type": "text",
          "name": "name",
          "id": "u:d69922dc6598"
        },
        {
          "type": "text",
          "label": "触发类型",
          "name": "trigger_type_title",
          "id": "u:7d7e37b62ac6",
          "toggled": false
        },
        {
          "label": "重复规则",
          "type": "text",
          "name": "repeating_rules_title",
          "id": "u:7d7e37b62ac6"
        },
        {
          "label": "重复时间",
          "type": "text",
          "name": "duration_title",
          "id": "u:7d7e37b62ac6"
        },
        {
          "label": "开始时间",
          "type": "text",
          "name": "start_time",
          "id": "u:f765a44cebb2"
        },
        {
          "label": "创建时间",
          "type": "text",
          "name": "create_time",
          "id": "u:d6079d76bd43",
          "toggled": false
        },
        {
          "label": "任务内容",
          "type": "text",
          "name": "content",
          "id": "u:b6543fd63333"
        },
        {
          "label": "状态",
          "type": "text",
          "name": "status_title",
          "id": "u:11123c72be9c"
        },
        {
          "label": "用户",
          "type": "text",
          "name": "patients_name",
          "id": "u:f42e19776384",
          "placeholder": "-",
          "className": ""
        },
        {
          "type": "text",
          "label": "执行者",
          "id": "u:68129c5fd43d",
          "name": "user_name"
        },
        {
          "type": "text",
          "label": "创建者",
          "id": "u:d6079d76bd43",
          "name": "create_name"
        },
        {
          "type": "operation",
          "label": "操作",
          "buttons": [
            {
              "label": "查看",
              "type": "button",
              "actionType": "dialog",
              "level": "link",
              "dialog": {
                "type": "dialog",
                "title": "任务规则详情页",
                "body": [
                  {
                    "type": "form",
                    "id": "u:dc5e68da3597",
                    "api": "/api/aio-program/task_rule/edit",
                    "body": [
                      {
                        "type": "input-text",
                        "id": "u:0b320806e951",
                        "name": "task_rule_id",
                        "label": "ID",
                        "mode": "normal",
                        "disabled": false,
                        "static": true
                      },
                      {
                        "type": "input-text",
                        "id": "u:3a559143d4d0",
                        "name": "name",
                        "label": "任务名称",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "required": true,
                        "clearable": true
                      },
                      {
                        "type": "nested-select",
                        "label": "目标客户",
                        "name": "patient_ids",
                        "id": "u:cf62f9bffada",
                        "disabled": false,
                        "mode": "normal",
                        "static": true,
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "multiple": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/patientcenter/patient/list",
                          "method": "post",
                          "messages": {
                          },
                          "adaptor": "console.log(payload)\nreturn payload",
                          "dataType": "json",
                          "data": {
                            "patientDtoFilter": {
                              "patientName": "",
                              "nationalId": "",
                              "phone": "",
                              "patientId": "",
                              "dataPermissionsUser": ""
                            },
                            "pageParam": {
                              "pageNum": "1",
                              "pageSize": "1000"
                            }
                          }
                        },
                        "labelField": "patientName",
                        "valueField": "patientId",
                        "clearable": true,
                        "placeholder": "请选择目标患者",
                        "hideNodePathLabel": true,
                        "joinValues": false,
                        "required": true,
                        "extractValue": true
                      },
                      {
                        "type": "select",
                        "name": "trigger_type",
                        "label": "触发条件",
                        "id": "u:0b717e64c033",
                        "disabled": false,
                        "mode": "normal",
                        "static": true,
                        "options": [
                          {
                            "label": "定时型",
                            "value": 1
                          }
                        ],
                        "multiple": false,
                        "required": true,
                        "value": 1
                      },
                      {
                        "type": "input-datetime",
                        "name": "start_time",
                        "label": "开始时间",
                        "id": "u:98ee782be7d1",
                        "disabled": false,
                        "mode": "normal",
                        "static": true,
                        "inputFormat": "YYYY-MM-DD HH:mm:ss",
                        "placeholder": "请选择日期以及时间",
                        "format": "YYYY-MM-DD HH:mm:ss",
                        "minDate": "",
                        "maxDate": "",
                        "value": "",
                        "required": true
                      },
                      {
                        "type": "select",
                        "name": "repeating_rules",
                        "label": "重复规则",
                        "id": "u:ba434a14b747",
                        "disabled": true,
                        "mode": "normal",
                        "options": [
                          {
                            "label": "不重复",
                            "value": 0
                          },
                          {
                            "label": "每天重复",
                            "value": 1
                          },
                          {
                            "label": "每周重复",
                            "value": 2
                          },
                          {
                            "label": "指定日期重复",
                            "value": 4
                          }
                        ],
                        "multiple": false,
                        "value": 0
                      },
                      {
                        "type": "button-group-select",
                        "id": "u:811b3b103424",
                        "static": false,
                        "name": "weekly_repeat_days",
                        "label": "任务生效后",
                        "mode": "normal",
                        "options": [
                          {
                            "label": "第1天",
                            "value": 1
                          },
                          {
                            "label": "第2天",
                            "value": 2
                          },
                          {
                            "label": "第3天",
                            "value": 3
                          },
                          {
                            "label": "第4天",
                            "value": 4
                          },
                          {
                            "label": "第5天",
                            "value": 5
                          },
                          {
                            "label": "第6天",
                            "value": 6
                          },
                          {
                            "label": "第7天",
                            "value": 7
                          }
                        ],
                        "inline": false,
                        "multiple": true,
                        "joinValues": false,
                        "extractValue": true,
                        "hiddenOn": "data.repeating_rules != 2",
                        "clearValueOnHidden": true,
                        "value": [
                          1
                        ],
                        "required": true
                      },
                      {
                        "type": "fieldSet",
                        "id": "u:8deb319a96fa",
                        "title": "选择任务重复发送日期",
                        "collapsable": false,
                        "body": [
                          {
                            "type": "group",
                            "body": [
                              {
                                "type": "input-text",
                                "label": "任务开始后第",
                                "name": "offset_date_values",
                                "id": "u:a3b16263a708",
                                "clearValueOnHidden": true,
                                "disabled": true
                              },
                              {
                                "type": "select",
                                "label": "",
                                "name": "offset_date_unit",
                                "options": [
                                  {
                                    "label": "天",
                                    "value": 4
                                  },
                                  {
                                    "label": "周",
                                    "value": 5
                                  },
                                  {
                                    "label": "月",
                                    "value": 6
                                  },
                                  {
                                    "label": "年",
                                    "value": 7
                                  }
                                ],
                                "id": "u:21d8793931a6",
                                "mode": "normal",
                                "multiple": false,
                                "clearValueOnHidden": true,
                                "value": 4,
                                "disabled": true
                              }
                            ],
                            "id": "u:d36a2e0a8939"
                          }
                        ],
                        "subFormMode": "",
                        "className": "Collapse--base",
                        "hiddenOn": "data.repeating_rules != 4"
                      },
                      {
                        "type": "input-group",
                        "label": "重复持续时长",
                        "mode": "normal",
                        "id": "u:54c735b0afd6",
                        "disabled": false,
                        "static": true,
                        "body": [
                          {
                            "type": "select",
                            "label": "文本",
                            "name": "duration_value",
                            "id": "u:7443d80b0039",
                            "options": [
                              {
                                "label": "1",
                                "value": 1
                              },
                              {
                                "label": "2",
                                "value": 2
                              },
                              {
                                "label": "3",
                                "value": 3
                              },
                              {
                                "label": "4",
                                "value": 4
                              },
                              {
                                "label": "5",
                                "value": 5
                              },
                              {
                                "label": "6",
                                "value": 6
                              },
                              {
                                "label": "7",
                                "value": 7
                              },
                              {
                                "label": "8",
                                "value": 8
                              },
                              {
                                "label": "9",
                                "value": 9
                              },
                              {
                                "label": "10",
                                "value": 10
                              },
                              {
                                "label": "11",
                                "value": 11
                              },
                              {
                                "label": "12",
                                "value": 12
                              },
                              {
                                "label": "13",
                                "value": 13
                              },
                              {
                                "label": "14",
                                "value": 14
                              },
                              {
                                "label": "15",
                                "value": 15
                              },
                              {
                                "label": "16",
                                "value": 16
                              },
                              {
                                "label": "17",
                                "value": 17
                              },
                              {
                                "label": "18",
                                "value": 18
                              },
                              {
                                "label": "19",
                                "value": 19
                              },
                              {
                                "label": "20",
                                "value": 20
                              },
                              {
                                "label": "21",
                                "value": 21
                              },
                              {
                                "label": "22",
                                "value": 22
                              },
                              {
                                "label": "23",
                                "value": 23
                              },
                              {
                                "label": "24",
                                "value": 24
                              },
                              {
                                "label": "25",
                                "value": 25
                              },
                              {
                                "label": "26",
                                "value": 26
                              },
                              {
                                "label": "27",
                                "value": 27
                              },
                              {
                                "label": "28",
                                "value": 28
                              },
                              {
                                "label": "29",
                                "value": 29
                              },
                              {
                                "label": "30",
                                "value": 30
                              }
                            ],
                            "multiple": false,
                            "value": 1
                          },
                          {
                            "type": "select",
                            "name": "duration_unit",
                            "options": [
                              {
                                "label": "天",
                                "value": 4
                              },
                              {
                                "label": "周",
                                "value": 5
                              },
                              {
                                "label": "月",
                                "value": 6
                              },
                              {
                                "label": "年",
                                "value": 7
                              }
                            ],
                            "value": "4",
                            "id": "u:6cd3bc0ea86c"
                          }
                        ]
                      },
                      {
                        "type": "textarea",
                        "name": "content",
                        "disabled": false,
                        "label": "任务内容",
                        "mode": "normal",
                        "id": "u:8dfadf06e6ae",
                        "static": true,
                        "required": true,
                        "minRows": 3,
                        "maxRows": 20
                      },
                      {
                        "type": "picker",
                        "disabled": true,
                        "label": "任务素材",
                        "mode": "normal",
                        "id": "u:81ae9353c86a",
                        "name": "task_materials",
                        "multiple": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/materialcenter/allMaterial/list",
                          "method": "post",
                          "messages": {
                          },
                          "dataType": "json",
                          "data": {
                            "pageParam": {
                              "pageNum": "${pageNum}",
                              "pageSize": "${pageSize}"
                            },
                            "allMaterialDtoFilter": {
                              "title": "${title}",
                              "type": "${type}",
                              "materialType": "${materialType}",
                              "labelIdListString": "${label}"
                            },
                            "orderParm": [
                              {
                                "fieldName": "createTime",
                                "asc": 1
                              }
                            ]
                          },
                          "adaptor": "console.log(payload);\nconst items = payload.data.items;\n\nconst newitems = [];\n\nfor (const e of items) {\n    if (e.materialType === '1') {\n        e.description = e.content;\n    }\n    newitems.push(e);\n}\n\npayload.data.items = items;\nconsole.log(payload);\nreturn payload;\n"
                        },
                        "labelField": "title",
                        "valueField": "task_material_id",
                        "joinValues": false,
                        "value": "",
                        "pickerSchema": {
                          "mode": "table",
                          "name": "thelist",
                          "draggable": true,
                          "headerToolbar": {
                            "wrapWithPanel": false,
                            "type": "form",
                            "className": "text-right",
                            "target": "thelist",
                            "mode": "inline",
                            "body": [
                              {
                                "type": "button-group-select",
                                "name": "materialType",
                                "id": "u:46bedb90b7e6",
                                "label": "类型",
                                "inline": false,
                                "options": [
                                  {
                                    "label": "全部",
                                    "value": 0
                                  },
                                  {
                                    "label": "富文本",
                                    "value": 2
                                  },
                                  {
                                    "label": "纯文本",
                                    "value": 1
                                  },
                                  {
                                    "label": "链接",
                                    "value": 3
                                  }
                                ],
                                "multiple": false,
                                "value": 1
                              },
                              {
                                "type": "input-text",
                                "name": "title",
                                "id": "u:436a531ae90c",
                                "addOn": {
                                  "type": "submit",
                                  "label": "搜索",
                                  "level": "primary",
                                  "icon": "fa fa-search pull-left",
                                  "id": "u:4051a516bea0"
                                }
                              },
                              {
                                "type": "button-group-select",
                                "name": "type",
                                "inline": false,
                                "options": [
                                  {
                                    "label": "企业素材",
                                    "value": 2
                                  },
                                  {
                                    "label": "个人素材",
                                    "value": 1
                                  }
                                ],
                                "id": "u:46bedb90b7e6",
                                "multiple": false,
                                "value": 1
                              }
                            ],
                            "id": "u:224d46a01acf"
                          },
                          "footerToolbar": [
                            {
                              "type": "statistics",
                              "align": "left"
                            },
                            {
                              "type": "pagination",
                              "align": "right"
                            },
                            {
                              "type": "switch-per-page",
                              "tpl": "内容",
                              "wrapperComponent": "",
                              "id": "u:9138cd5259bc",
                              "align": "right"
                            }
                          ],
                          "columns": [
                            {
                              "name": "title",
                              "label": "标题",
                              "type": "text",
                              "id": "u:831a9a9c1291",
                              "placeholder": "-",
                              "width": 100,
                              "className": "word-break ",
                              "align": "left"
                            },
                            {
                              "name": "materialType",
                              "label": "类型",
                              "type": "mapping",
                              "id": "u:0a0cb7c7f5ae",
                              "placeholder": "-",
                              "width": 50,
                              "className": "word-break ",
                              "map": {
                                "1": "纯文本",
                                "2": "富文本",
                                "3": "链接"
                              },
                              "align": "left"
                            },
                            {
                              "name": "description",
                              "label": "内容描述",
                              "type": "text",
                              "id": "u:b31367aa876d",
                              "placeholder": "-",
                              "width": 150,
                              "className": "word-break ",
                              "style": {
                                "-webkit-line-clamp": "2",
                                "display": "-webkit-box",
                                "-webkit-box-orient": "vertical",
                                "text-overflow": "inherit",
                                "overflow": "hidden",
                                "text-align": "center",
                                "padding": "2px",
                                "position": "absolute",
                                "top": "50%",
                                "transform": "translateY(-50%)"
                              },
                              "popOver": false,
                              "align": "center"
                            }
                          ],
                          "id": "u:4e9cfd2a2de9",
                          "perPage": 20,
                          "perPageField": "pageSize",
                          "perPageAvailable": [
                            10,
                            20,
                            50
                          ],
                          "messages": {
                          },
                          "primaryField": "task_material_id",
                          "defaultParams": {
                          },
                          "pageField": "pageNum"
                        },
                        "clearValueOnHidden": true
                      },
                      {
                        "type": "input-group",
                        "label": "任务完成时间",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "id": "u:54c735b0afd6",
                        "body": [
                          {
                            "type": "select",
                            "label": "文本",
                            "name": "task_due_time_value",
                            "id": "u:7443d80b0039",
                            "options": [
                              {
                                "label": "1",
                                "value": 1
                              },
                              {
                                "label": "2",
                                "value": 2
                              },
                              {
                                "label": "3",
                                "value": 3
                              },
                              {
                                "label": "4",
                                "value": 4
                              },
                              {
                                "label": "5",
                                "value": 5
                              },
                              {
                                "label": "6",
                                "value": 6
                              },
                              {
                                "label": "7",
                                "value": 7
                              },
                              {
                                "label": "8",
                                "value": 8
                              },
                              {
                                "label": "9",
                                "value": 9
                              },
                              {
                                "label": "10",
                                "value": 10
                              },
                              {
                                "label": "11",
                                "value": 11
                              },
                              {
                                "label": "12",
                                "value": 12
                              },
                              {
                                "label": "13",
                                "value": 13
                              },
                              {
                                "label": "14",
                                "value": 14
                              },
                              {
                                "label": "15",
                                "value": 15
                              },
                              {
                                "label": "16",
                                "value": 16
                              },
                              {
                                "label": "17",
                                "value": 17
                              },
                              {
                                "label": "18",
                                "value": 18
                              },
                              {
                                "label": "19",
                                "value": 19
                              },
                              {
                                "label": "20",
                                "value": 20
                              },
                              {
                                "label": "21",
                                "value": 21
                              },
                              {
                                "label": "22",
                                "value": 22
                              },
                              {
                                "label": "23",
                                "value": 23
                              },
                              {
                                "label": "24",
                                "value": 24
                              },
                              {
                                "label": "25",
                                "value": 25
                              },
                              {
                                "label": "26",
                                "value": 26
                              },
                              {
                                "label": "27",
                                "value": 27
                              },
                              {
                                "label": "28",
                                "value": 28
                              },
                              {
                                "label": "29",
                                "value": 29
                              },
                              {
                                "label": "30",
                                "value": 30
                              }
                            ],
                            "multiple": false,
                            "value": 1
                          },
                          {
                            "type": "select",
                            "name": "task_due_time_unit",
                            "options": [
                              {
                                "label": "时",
                                "value": 3
                              },
                              {
                                "label": "天",
                                "value": 4
                              },
                              {
                                "label": "周",
                                "value": 5
                              },
                              {
                                "label": "月",
                                "value": 6
                              },
                              {
                                "label": "年",
                                "value": 7
                              }
                            ],
                            "value": "4",
                            "id": "u:6cd3bc0ea86c"
                          }
                        ]
                      },
                      {
                        "type": "select",
                        "name": "completion_conditions",
                        "label": "任务完成条件",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "id": "u:e19162f2407f",
                        "multiple": false,
                        "required": true,
                        "options": [
                          {
                            "label": "人工点击完成按钮",
                            "value": 1
                          }
                        ],
                        "value": 1
                      },
                      {
                        "type": "nested-select",
                        "label": "执行者",
                        "name": "user_id",
                        "id": "u:cf62f9bffada",
                        "multiple": false,
                        "clearable": true,
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "required": true,
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/upms/sysUser/getFollowerList",
                          "method": "get",
                          "messages": {
                          },
                          "adaptor": "",
                          "dataType": "json"
                        },
                        "labelField": "label",
                        "valueField": "value",
                        "placeholder": "请选择执行者",
                        "hideNodePathLabel": true
                      },
                      {
                        "type": "select",
                        "id": "u:dae5a648d100",
                        "name": "status",
                        "label": "状态",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "clearable": true,
                        "options": [
                          {
                            "label": "进行中",
                            "value": 1
                          },
                          {
                            "label": "暂停中",
                            "value": 0
                          }
                        ],
                        "multiple": false,
                        "checkAll": true,
                        "defaultCheckAll": false,
                        "checkAllLabel": "",
                        "clearValueOnHidden": false,
                        "hidden": false,
                        "showInvalidMatch": false
                      },
                      {
                        "type": "nested-select",
                        "id": "u:cf62f9bffada",
                        "name": "creator_id",
                        "label": "创建者",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "required": true,
                        "clearable": true,
                        "multiple": false,
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/upms/sysUser/getFollowerList",
                          "method": "get",
                          "messages": {
                          },
                          "adaptor": "",
                          "dataType": "json"
                        },
                        "labelField": "label",
                        "valueField": "value",
                        "hideNodePathLabel": true,
                        "placeholder": ""
                      }
                    ],
                    "initApi": {
                      "method": "get",
                      "url": "/api/aio-program/task_rule/$task_rule_id/detail",
                      "messages": {
                      },
                      "replaceData": true
                    },
                    "title": "编辑整体任务",
                    "silentPolling": false
                  }
                ],
                "id": "u:f060a93dcf72",
                "actions": [
                ]
              },
              "id": "u:a6ae663c78a7"
            },
            {
              "label": "编辑",
              "type": "button",
              "actionType": "dialog",
              "level": "link",
              "dialog": {
                "type": "dialog",
                "title": "编辑",
                "body": [
                  {
                    "type": "form",
                    "api": {
                      "method": "post",
                      "url": "/api/aio-program/task_rule/edit",
                      "requestAdaptor": "console.log('api', api);\nif (api.method === 'post') {\n    for (let key in api.data) {\n        if (api.data[key] === '') {\n            delete api.data[key];\n        } else {\n            if (key === 'lib_materials') {\n                api.data[key] = api.data[key].map(material => {\n                    const { materialType, id } = material;\n                    return { type: materialType, id };\n                });\n                console.log('lib_materials' + key, api.data[key]);\n            }\n        }\n    }\n    api.url = api.url.split('?')[0] + '?' + new URLSearchParams(api.query);\n}\n\nreturn api;\n",
                      "adaptor": "",
                      "messages": {
                      },
                      "dataType": "json"
                    },
                    "body": [
                      {
                        "label": "ID",
                        "name": "task_rule_id",
                        "type": "input-text",
                        "id": "u:0b320806e951",
                        "mode": "normal",
                        "disabled": false,
                        "static": true
                      },
                      {
                        "label": "任务名称",
                        "name": "name",
                        "type": "input-text",
                        "id": "u:3a559143d4d0",
                        "mode": "normal",
                        "required": true,
                        "clearable": true
                      },
                      {
                        "label": "目标客户",
                        "name": "patient_ids",
                        "type": "nested-select",
                        "id": "u:cf62f9bffada",
                        "mode": "normal",
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "multiple": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/patientcenter/patient/list",
                          "method": "post",
                          "messages": {
                          },
                          "adaptor": "console.log(payload)\nreturn payload",
                          "dataType": "json",
                          "data": {
                            "patientDtoFilter": {
                              "patientName": "",
                              "nationalId": "",
                              "phone": "",
                              "patientId": "",
                              "dataPermissionsUser": ""
                            },
                            "pageParam": {
                              "pageNum": "1",
                              "pageSize": "1000"
                            }
                          }
                        },
                        "labelField": "patientName",
                        "valueField": "patientId",
                        "clearable": true,
                        "placeholder": "请选择目标患者",
                        "hideNodePathLabel": true,
                        "joinValues": false,
                        "required": true,
                        "extractValue": true
                      },
                      {
                        "label": "触发条件",
                        "name": "trigger_type",
                        "type": "select",
                        "id": "u:0b717e64c033",
                        "mode": "normal",
                        "options": [
                          {
                            "label": "定时型",
                            "value": 1
                          }
                        ],
                        "multiple": false,
                        "required": true,
                        "value": 1
                      },
                      {
                        "label": "开始时间",
                        "name": "start_time",
                        "type": "input-datetime",
                        "id": "u:98ee782be7d1",
                        "mode": "normal",
                        "inputFormat": "YYYY-MM-DD HH:mm:ss",
                        "placeholder": "请选择日期以及时间",
                        "format": "YYYY-MM-DD HH:mm:ss",
                        "minDate": "",
                        "maxDate": "",
                        "value": "",
                        "required": true
                      },
                      {
                        "label": "重复规则",
                        "name": "repeating_rules",
                        "type": "select",
                        "id": "u:ba434a14b747",
                        "mode": "normal",
                        "options": [
                          {
                            "label": "不重复",
                            "value": 0
                          },
                          {
                            "label": "每天重复",
                            "value": 1
                          },
                          {
                            "label": "每周重复",
                            "value": 2
                          },
                          {
                            "label": "指定日期重复",
                            "value": 4
                          }
                        ],
                        "multiple": false,
                        "value": 0
                      },
                      {
                        "type": "fieldSet",
                        "id": "u:8deb319a96fa",
                        "hiddenOn": "data.repeating_rules != 4",
                        "title": "选择任务重复发送日期(数字之间需要用、隔开)",
                        "collapsable": false,
                        "body": [
                          {
                            "type": "group",
                            "body": [
                              {
                                "type": "input-text",
                                "label": "任务开始后第",
                                "name": "offset_date_values",
                                "id": "u:a3b16263a708",
                                "clearValueOnHidden": true
                              },
                              {
                                "type": "select",
                                "label": "",
                                "name": "offset_date_unit",
                                "options": [
                                  {
                                    "label": "天",
                                    "value": 4
                                  },
                                  {
                                    "label": "周",
                                    "value": 5
                                  },
                                  {
                                    "label": "月",
                                    "value": 6
                                  },
                                  {
                                    "label": "年",
                                    "value": 7
                                  }
                                ],
                                "id": "u:21d8793931a6",
                                "mode": "normal",
                                "multiple": false,
                                "value": 4,
                                "clearValueOnHidden": true
                              }
                            ],
                            "id": "u:d36a2e0a8939"
                          }
                        ],
                        "subFormMode": "",
                        "className": "Collapse--base"
                      },
                      {
                        "type": "button-group-select",
                        "id": "u:811b3b103424",
                        "hiddenOn": "data.repeating_rules != 2",
                        "label": "任务生效后",
                        "name": "weekly_repeat_days",
                        "mode": "normal",
                        "options": [
                          {
                            "label": "第1天",
                            "value": 1
                          },
                          {
                            "label": "第2天",
                            "value": 2
                          },
                          {
                            "label": "第3天",
                            "value": 3
                          },
                          {
                            "label": "第4天",
                            "value": 4
                          },
                          {
                            "label": "第5天",
                            "value": 5
                          },
                          {
                            "label": "第6天",
                            "value": 6
                          },
                          {
                            "label": "第7天",
                            "value": 7
                          }
                        ],
                        "inline": false,
                        "multiple": true,
                        "joinValues": false,
                        "extractValue": true,
                        "required": true,
                        "value": [
                          1
                        ]
                      },
                      {
                        "type": "fieldSet",
                        "id": "u:8deb319a96fa",
                        "body": [
                          {
                            "type": "group",
                            "id": "u:d36a2e0a8939",
                            "body": [
                              {
                                "type": "input-text",
                                "label": "任务生效后",
                                "name": "interval_repeat_value",
                                "id": "u:a3b16263a708"
                              },
                              {
                                "type": "select",
                                "label": "",
                                "name": "interval_repeat_unit",
                                "options": [
                                  {
                                    "label": "天",
                                    "value": 4
                                  },
                                  {
                                    "label": "周",
                                    "value": 5
                                  },
                                  {
                                    "label": "月",
                                    "value": 6
                                  },
                                  {
                                    "label": "年",
                                    "value": 7
                                  }
                                ],
                                "id": "u:21d8793931a6",
                                "mode": "normal"
                              }
                            ]
                          }
                        ],
                        "title": "选择任务发送间隔",
                        "collapsable": false,
                        "subFormMode": "",
                        "className": "Collapse--base",
                        "hiddenOn": "data.repeating_rules != 3"
                      },
                      {
                        "type": "input-group",
                        "label": "重复持续时长",
                        "mode": "normal",
                        "id": "u:54c735b0afd6",
                        "body": [
                          {
                            "type": "select",
                            "label": "文本",
                            "name": "duration_value",
                            "id": "u:7443d80b0039",
                            "options": [
                              {
                                "label": "1",
                                "value": 1
                              },
                              {
                                "label": "2",
                                "value": 2
                              },
                              {
                                "label": "3",
                                "value": 3
                              },
                              {
                                "label": "4",
                                "value": 4
                              },
                              {
                                "label": "5",
                                "value": 5
                              },
                              {
                                "label": "6",
                                "value": 6
                              },
                              {
                                "label": "7",
                                "value": 7
                              },
                              {
                                "label": "8",
                                "value": 8
                              },
                              {
                                "label": "9",
                                "value": 9
                              },
                              {
                                "label": "10",
                                "value": 10
                              },
                              {
                                "label": "11",
                                "value": 11
                              },
                              {
                                "label": "12",
                                "value": 12
                              },
                              {
                                "label": "13",
                                "value": 13
                              },
                              {
                                "label": "14",
                                "value": 14
                              },
                              {
                                "label": "15",
                                "value": 15
                              },
                              {
                                "label": "16",
                                "value": 16
                              },
                              {
                                "label": "17",
                                "value": 17
                              },
                              {
                                "label": "18",
                                "value": 18
                              },
                              {
                                "label": "19",
                                "value": 19
                              },
                              {
                                "label": "20",
                                "value": 20
                              },
                              {
                                "label": "21",
                                "value": 21
                              },
                              {
                                "label": "22",
                                "value": 22
                              },
                              {
                                "label": "23",
                                "value": 23
                              },
                              {
                                "label": "24",
                                "value": 24
                              },
                              {
                                "label": "25",
                                "value": 25
                              },
                              {
                                "label": "26",
                                "value": 26
                              },
                              {
                                "label": "27",
                                "value": 27
                              },
                              {
                                "label": "28",
                                "value": 28
                              },
                              {
                                "label": "29",
                                "value": 29
                              },
                              {
                                "label": "30",
                                "value": 30
                              }
                            ],
                            "multiple": false,
                            "value": 1
                          },
                          {
                            "type": "select",
                            "name": "duration_unit",
                            "options": [
                              {
                                "label": "天",
                                "value": 4
                              },
                              {
                                "label": "周",
                                "value": 5
                              },
                              {
                                "label": "月",
                                "value": 6
                              },
                              {
                                "label": "年",
                                "value": 7
                              }
                            ],
                            "value": "4",
                            "id": "u:6cd3bc0ea86c"
                          }
                        ],
                        "hiddenOn": "data.repeating_rules == 4||data.repeating_rules == 0"
                      },
                      {
                        "type": "textarea",
                        "label": "任务内容",
                        "mode": "normal",
                        "id": "u:8dfadf06e6ae",
                        "name": "content",
                        "minRows": 3,
                        "maxRows": 20
                      },
                      {
                        "type": "picker",
                        "name": "lib_materials",
                        "label": "素材",
                        "mode": "normal",
                        "id": "u:81ae9353c86b",
                        "multiple": true,
                        "value": "",
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/materialcenter/allMaterial/list",
                          "method": "post",
                          "messages": {
                          },
                          "adaptor": "console.log(payload);\nconst items = payload.data.items;\n\nconst newitems = [];\n\nfor (const e of items) {\n    if (e.materialType === '1') {\n        e.description = e.content;\n    }\n    newitems.push(e);\n}\n\npayload.data.items = items;\nconsole.log(payload);\nreturn payload;\n",
                          "dataType": "json",
                          "data": {
                            "pageParam": {
                              "pageNum": "${pageNum}",
                              "pageSize": "${pageSize}"
                            },
                            "allMaterialDtoFilter": {
                              "title": "${title}",
                              "type": "${type}",
                              "materialType": "${materialType}",
                              "labelIdListString": "${label}"
                            },
                            "orderParm": [
                              {
                                "fieldName": "createTime",
                                "asc": 1
                              }
                            ]
                          }
                        },
                        "labelField": "title",
                        "valueField": "task_material_id",
                        "joinValues": false,
                        "pickerSchema": {
                          "mode": "table",
                          "name": "thelist",
                          "draggable": false,
                          "headerToolbar": {
                            "wrapWithPanel": false,
                            "type": "form",
                            "className": "text-right",
                            "target": "thelist",
                            "mode": "inline",
                            "body": [
                              {
                                "type": "button-group-select",
                                "name": "materialType",
                                "id": "u:46bedb90b7e6",
                                "options": [
                                  {
                                    "label": "全部",
                                    "value": 0
                                  },
                                  {
                                    "label": "富文本",
                                    "value": 2
                                  },
                                  {
                                    "label": "纯文本",
                                    "value": 1
                                  },
                                  {
                                    "label": "链接",
                                    "value": 3
                                  }
                                ],
                                "multiple": false,
                                "value": 0,
                                "label": "类型",
                                "inline": false
                              },
                              {
                                "type": "input-text",
                                "name": "title",
                                "id": "u:436a531ae90c",
                                "addOn": {
                                  "type": "submit",
                                  "label": "搜索",
                                  "level": "primary",
                                  "icon": "fa fa-search pull-left",
                                  "id": "u:4051a516bea0"
                                }
                              },
                              {
                                "type": "button-group-select",
                                "name": "type",
                                "inline": false,
                                "options": [
                                  {
                                    "label": "企业素材",
                                    "value": 2
                                  },
                                  {
                                    "label": "个人素材",
                                    "value": 1
                                  }
                                ],
                                "id": "u:46bedb90b7e6",
                                "multiple": false,
                                "value": 2
                              }
                            ],
                            "id": "u:224d46a01acf",
                            "submitOnChange": true
                          },
                          "footerToolbar": [
                            {
                              "type": "statistics",
                              "align": "left"
                            },
                            {
                              "type": "pagination",
                              "align": "right"
                            },
                            {
                              "type": "switch-per-page",
                              "tpl": "内容",
                              "wrapperComponent": "",
                              "id": "u:9138cd5259bc",
                              "align": "right"
                            }
                          ],
                          "columns": [
                            {
                              "name": "title",
                              "label": "标题",
                              "type": "text",
                              "id": "u:831a9a9c1291",
                              "placeholder": "-",
                              "width": 100,
                              "className": "word-break ",
                              "align": "left"
                            },
                            {
                              "name": "materialType",
                              "label": "类型",
                              "type": "mapping",
                              "id": "u:0a0cb7c7f5ae",
                              "placeholder": "-",
                              "width": 50,
                              "className": "word-break ",
                              "map": {
                                "1": "纯文本",
                                "2": "富文本",
                                "3": "链接"
                              },
                              "align": "left"
                            },
                            {
                              "name": "description",
                              "label": "内容描述",
                              "type": "text",
                              "id": "u:b31367aa876d",
                              "placeholder": "-",
                              "width": 150,
                              "className": "word-break ",
                              "style": {
                                "-webkit-line-clamp": "2",
                                "display": "-webkit-box",
                                "-webkit-box-orient": "vertical",
                                "text-overflow": "inherit",
                                "overflow": "hidden",
                                "text-align": "center",
                                "padding": "2px",
                                "position": "absolute",
                                "top": "50%",
                                "transform": "translateY(-50%)"
                              },
                              "popOver": false,
                              "align": "center"
                            }
                          ],
                          "id": "u:4e9cfd2a2de9",
                          "perPage": 20,
                          "perPageField": "pageSize",
                          "perPageAvailable": [
                            10,
                            20,
                            50
                          ],
                          "messages": {
                          },
                          "primaryField": "task_material_id",
                          "defaultParams": {
                          },
                          "pageField": "pageNum"
                        },
                        "clearValueOnHidden": true
                      },
                      {
                        "type": "picker",
                        "name": "task_materials",
                        "label": "任务素材",
                        "mode": "normal",
                        "id": "u:81ae9353c86a",
                        "multiple": true,
                        "size": "lg",
                        "source": {
                          "url": "",
                          "method": "post",
                          "messages": {
                          },
                          "adaptor": "console.log(payload);\nconst items = payload.data.items;\n\nconst newitems = [];\n\nfor (const e of items) {\n    if (e.materialType === '1') {\n        e.description = e.content;\n    }\n    newitems.push(e);\n}\n\npayload.data.items = items;\nconsole.log(payload);\nreturn payload;\n",
                          "dataType": "json",
                          "data": {
                            "pageParam": {
                              "pageNum": "${pageNum}",
                              "pageSize": "${pageSize}"
                            },
                            "allMaterialDtoFilter": {
                              "title": "${title}",
                              "type": "${type}",
                              "materialType": "${materialType}",
                              "labelIdListString": "${label}"
                            },
                            "orderParm": [
                              {
                                "fieldName": "createTime",
                                "asc": 1
                              }
                            ]
                          }
                        },
                        "labelField": "title",
                        "valueField": "task_material_id",
                        "joinValues": false,
                        "value": "",
                        "pickerSchema": {
                          "mode": "table",
                          "name": "thelist",
                          "draggable": true,
                          "headerToolbar": {
                            "wrapWithPanel": false,
                            "type": "form",
                            "className": "text-right",
                            "target": "thelist",
                            "mode": "inline",
                            "body": [
                              {
                                "type": "button-group-select",
                                "name": "materialType",
                                "id": "u:46bedb90b7e6",
                                "options": [
                                  {
                                    "label": "全部",
                                    "value": 0
                                  },
                                  {
                                    "label": "富文本",
                                    "value": 2
                                  },
                                  {
                                    "label": "纯文本",
                                    "value": 1
                                  },
                                  {
                                    "label": "链接",
                                    "value": 3
                                  },
                                  {
                                    "label": "问卷",
                                    "value": 4
                                  }
                                ],
                                "multiple": false,
                                "value": 1,
                                "label": "类型",
                                "inline": false
                              },
                              {
                                "type": "input-text",
                                "name": "title",
                                "id": "u:436a531ae90c",
                                "addOn": {
                                  "type": "submit",
                                  "label": "搜索",
                                  "level": "primary",
                                  "icon": "fa fa-search pull-left",
                                  "id": "u:4051a516bea0",
                                  "disabled": true,
                                  "disabledTip": "当前不支持添加任务素材!"
                                }
                              }
                            ],
                            "id": "u:224d46a01acf"
                          },
                          "footerToolbar": [
                            {
                              "type": "statistics",
                              "align": "left"
                            },
                            {
                              "type": "pagination",
                              "align": "right"
                            },
                            {
                              "type": "switch-per-page",
                              "tpl": "内容",
                              "wrapperComponent": "",
                              "id": "u:9138cd5259bc",
                              "align": "right"
                            }
                          ],
                          "columns": [
                            {
                              "name": "title",
                              "label": "标题",
                              "type": "text",
                              "id": "u:831a9a9c1291",
                              "placeholder": "-",
                              "width": 100,
                              "className": "word-break ",
                              "align": "left"
                            },
                            {
                              "name": "materialType",
                              "label": "类型",
                              "type": "mapping",
                              "id": "u:0a0cb7c7f5ae",
                              "placeholder": "-",
                              "width": 50,
                              "className": "word-break ",
                              "map": {
                                "1": "纯文本",
                                "2": "富文本",
                                "3": "链接"
                              },
                              "align": "left"
                            },
                            {
                              "name": "description",
                              "label": "内容描述",
                              "type": "text",
                              "id": "u:b31367aa876d",
                              "placeholder": "-",
                              "width": 150,
                              "className": "word-break ",
                              "style": {
                                "-webkit-line-clamp": "2",
                                "display": "-webkit-box",
                                "-webkit-box-orient": "vertical",
                                "text-overflow": "inherit",
                                "overflow": "hidden",
                                "text-align": "center",
                                "padding": "2px",
                                "position": "absolute",
                                "top": "50%",
                                "transform": "translateY(-50%)"
                              },
                              "popOver": false,
                              "align": "center"
                            }
                          ],
                          "id": "u:4e9cfd2a2de9",
                          "perPage": 20,
                          "perPageField": "pageSize",
                          "perPageAvailable": [
                            10,
                            20,
                            50
                          ],
                          "messages": {
                          },
                          "primaryField": "task_material_id",
                          "defaultParams": {
                          },
                          "pageField": "pageNum",
                          "initFetch": false
                        },
                        "clearValueOnHidden": true
                      },
                      {
                        "type": "picker",
                        "label": "问卷",
                        "mode": "normal",
                        "id": "u:81ae9353c86a",
                        "name": "questionnaire_dataset",
                        "multiple": true,
                        "size": "lg",
                        "source": {
                          "url": "https://dev-aio-form.zuoshouyisheng.com/api/surely/surelyform/rest/surveys?sort=-updatedAt&status=3&take=20&skip=0&labelIdListString=",
                          "method": "get",
                          "messages": {
                          },
                          "adaptor": "console.log(payload);\nconst items = payload.data.list;\nconst total = payload.data.count\n\npayload.data.items = items;\npayload.data.total = total;\nconsole.log(payload);\nreturn payload;\n",
                          "requestAdaptor": ""
                        },
                        "labelField": "title",
                        "valueField": "publishId",
                        "joinValues": false,
                        "value": "",
                        "pickerSchema": {
                          "mode": "table",
                          "name": "thelist",
                          "draggable": false,
                          "headerToolbar": {
                            "wrapWithPanel": false,
                            "type": "form",
                            "className": "text-right",
                            "target": "thelist",
                            "mode": "inline",
                            "body": [
                              {
                                "type": "select",
                                "name": "status",
                                "id": "u:6fffcd8304f2",
                                "options": [
                                  {
                                    "label": "未开始",
                                    "value": 2
                                  },
                                  {
                                    "label": "进行中",
                                    "value": 3
                                  },
                                  {
                                    "label": "已完成",
                                    "value": 4
                                  }
                                ],
                                "multiple": false,
                                "value": 3,
                                "mode": "inline",
                                "size": "lg"
                              },
                              {
                                "type": "input-text",
                                "name": "keyword",
                                "id": "u:436a531ae90c",
                                "addOn": {
                                  "type": "submit",
                                  "label": "搜索",
                                  "level": "primary",
                                  "icon": "fa fa-search pull-left",
                                  "id": "u:4051a516bea0"
                                },
                                "size": "lg",
                                "placeholder": "搜索问卷名称"
                              }
                            ],
                            "id": "u:224d46a01acf",
                            "canAccessSuperData": false
                          },
                          "footerToolbar": [
                            {
                              "type": "statistics",
                              "align": "left"
                            },
                            {
                              "type": "pagination",
                              "align": "right"
                            },
                            {
                              "type": "switch-per-page",
                              "tpl": "内容",
                              "wrapperComponent": "",
                              "id": "u:9138cd5259bc",
                              "align": "right"
                            }
                          ],
                          "columns": [
                            {
                              "name": "title",
                              "label": "名称",
                              "type": "text",
                              "id": "u:831a9a9c1291",
                              "placeholder": "-",
                              "width": 100,
                              "className": "word-break ",
                              "align": "left"
                            },
                            {
                              "name": "mode",
                              "label": "表单类型",
                              "type": "mapping",
                              "id": "u:0a0cb7c7f5ae",
                              "placeholder": "-",
                              "width": 50,
                              "className": "word-break ",
                              "map": {
                                "1": "经典",
                                "2": "幻灯片"
                              },
                              "align": "left"
                            },
                            {
                              "name": "labelName",
                              "label": "标签",
                              "type": "text",
                              "id": "u:b31367aa876d",
                              "placeholder": "-",
                              "width": 150,
                              "className": "word-break ",
                              "style": {
                                "-webkit-line-clamp": "2",
                                "display": "-webkit-box",
                                "-webkit-box-orient": "vertical",
                                "text-overflow": "inherit",
                                "overflow": "hidden",
                                "text-align": "center",
                                "padding": "2px",
                                "position": "absolute",
                                "top": "50%",
                                "transform": "translateY(-50%)"
                              },
                              "popOver": false,
                              "align": "center"
                            }
                          ],
                          "id": "u:4e9cfd2a2de9",
                          "perPage": 20,
                          "perPageField": "pageSize",
                          "perPageAvailable": [
                            10,
                            20,
                            50
                          ],
                          "messages": {
                          },
                          "primaryField": "task_material_id",
                          "defaultParams": {
                          },
                          "pageField": "pageNum"
                        },
                        "clearValueOnHidden": true
                      },
                      {
                        "type": "input-group",
                        "label": "任务完成时间",
                        "mode": "normal",
                        "id": "u:54c735b0afd6",
                        "body": [
                          {
                            "type": "select",
                            "label": "文本",
                            "name": "task_due_time_value",
                            "id": "u:7443d80b0039",
                            "options": [
                              {
                                "label": "1",
                                "value": 1
                              },
                              {
                                "label": "2",
                                "value": 2
                              },
                              {
                                "label": "3",
                                "value": 3
                              },
                              {
                                "label": "4",
                                "value": 4
                              },
                              {
                                "label": "5",
                                "value": 5
                              },
                              {
                                "label": "6",
                                "value": 6
                              },
                              {
                                "label": "7",
                                "value": 7
                              },
                              {
                                "label": "8",
                                "value": 8
                              },
                              {
                                "label": "9",
                                "value": 9
                              },
                              {
                                "label": "10",
                                "value": 10
                              },
                              {
                                "label": "11",
                                "value": 11
                              },
                              {
                                "label": "12",
                                "value": 12
                              },
                              {
                                "label": "13",
                                "value": 13
                              },
                              {
                                "label": "14",
                                "value": 14
                              },
                              {
                                "label": "15",
                                "value": 15
                              },
                              {
                                "label": "16",
                                "value": 16
                              },
                              {
                                "label": "17",
                                "value": 17
                              },
                              {
                                "label": "18",
                                "value": 18
                              },
                              {
                                "label": "19",
                                "value": 19
                              },
                              {
                                "label": "20",
                                "value": 20
                              },
                              {
                                "label": "21",
                                "value": 21
                              },
                              {
                                "label": "22",
                                "value": 22
                              },
                              {
                                "label": "23",
                                "value": 23
                              },
                              {
                                "label": "24",
                                "value": 24
                              },
                              {
                                "label": "25",
                                "value": 25
                              },
                              {
                                "label": "26",
                                "value": 26
                              },
                              {
                                "label": "27",
                                "value": 27
                              },
                              {
                                "label": "28",
                                "value": 28
                              },
                              {
                                "label": "29",
                                "value": 29
                              },
                              {
                                "label": "30",
                                "value": 30
                              }
                            ],
                            "multiple": false,
                            "value": 1
                          },
                          {
                            "type": "select",
                            "name": "task_due_time_unit",
                            "options": [
                              {
                                "label": "时",
                                "value": 3
                              },
                              {
                                "label": "天",
                                "value": 4
                              },
                              {
                                "label": "周",
                                "value": 5
                              },
                              {
                                "label": "月",
                                "value": 6
                              },
                              {
                                "label": "年",
                                "value": 7
                              }
                            ],
                            "value": "4",
                            "id": "u:6cd3bc0ea86c"
                          }
                        ]
                      },
                      {
                        "type": "select",
                        "name": "completion_conditions",
                        "label": "任务完成条件",
                        "mode": "normal",
                        "id": "u:e19162f2407f",
                        "multiple": false,
                        "required": true,
                        "options": [
                          {
                            "label": "人工点击完成按钮",
                            "value": 1
                          }
                        ],
                        "value": 1
                      },
                      {
                        "type": "nested-select",
                        "name": "user_id",
                        "label": "执行者",
                        "mode": "normal",
                        "id": "u:cf62f9bffada",
                        "multiple": false,
                        "required": true,
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/upms/sysUser/getFollowerList",
                          "method": "get",
                          "messages": {
                          },
                          "adaptor": "",
                          "dataType": "json"
                        },
                        "labelField": "label",
                        "valueField": "value",
                        "clearable": true,
                        "placeholder": "请选择执行者",
                        "hideNodePathLabel": true
                      }
                    ],
                    "id": "u:2bcd831bc241",
                    "initApi": {
                      "method": "get",
                      "url": "/api/aio-program/task_rule/$task_rule_id/detail",
                      "messages": {
                      },
                      "replaceData": true
                    },
                    "title": "编辑任务规则",
                    "silentPolling": false
                  }
                ],
                "id": "u:d686e69bd2f9"
              },
              "id": "u:4d528a999547"
            },
            {
              "type": "button",
              "label": "暂停",
              "actionType": "ajax",
              "level": "link",
              "api": {
                "method": "post",
                "url": "/api/aio-program/task_rule/change_rule_status",
                "data": {
                  "task_rule_id": "$task_rule_id",
                  "status": 0
                }
              },
              "id": "u:e8087ecbdc4c",
              "hiddenOn": "data.status != 1"
            },
            {
              "type": "button",
              "label": "继续",
              "actionType": "ajax",
              "level": "link",
              "api": {
                "method": "post",
                "url": "/api/aio-program/task_rule/change_rule_status",
                "data": {
                  "task_rule_id": "$task_rule_id",
                  "status": 1
                }
              },
              "id": "u:e8087ecbdc4c",
              "hiddenOn": "data.status != 0"
            },
            {
              "type": "button",
              "label": "删除",
              "actionType": "ajax",
              "level": "link",
              "className": "text-danger",
              "confirmText": "确定要删除？",
              "api": {
                "method": "post",
                "url": "/api/aio-program/task_rule/delete",
                "data": {
                  "remove_all": 1,
                  "task_rule_id": "$task_rule_id"
                }
              },
              "id": "u:e8087ecbdc4c"
            }
          ],
          "id": "u:68563d8d80c1"
        }
      ],
      "bulkActions": [
      ],
      "itemActions": [
      ],
      "features": [
        "create",
        "filter",
        "update",
        "view",
        "delete"
      ],
      "filterColumnCount": 3,
      "filterSettingSource": [
        "task_rule_id",
        "tenant_id",
        "status",
        "delete_flag",
        "program_id",
        "name",
        "patient_ids",
        "user_id",
        "trigger_type",
        "start_time",
        "repeating_rules",
        "weekly_repeat_days",
        "interval_repeat_value",
        "interval_repeat_unit",
        "duration_value",
        "duration_unit",
        "content",
        "task_due_time_value",
        "task_due_time_unit",
        "completion_conditions"
      ],
      "filterEnabledList": [
        {
          "label": "status",
          "value": "status"
        },
        {
          "label": "start_time",
          "value": "start_time"
        },
        {
          "label": "user_id",
          "value": "user_id"
        },
        {
          "label": "name",
          "value": "name"
        },
        {
          "label": "content",
          "value": "content"
        },
        {
          "label": "patient_ids",
          "value": "patient_ids"
        }
      ],
      "headerToolbar": [
        {
          "label": "新增",
          "type": "button",
          "actionType": "dialog",
          "level": "primary",
          "dialog": {
            "type": "dialog",
            "title": "新增",
            "body": [
              {
                "type": "form",
                "api": {
                  "method": "post",
                  "url": "/api/aio-program/task_rule",
                  "requestAdaptor": "console.log('api', api);\nif (api.method === 'post') {\n    for (let key in api.data) {\n        if (api.data[key] === '') {\n            delete api.data[key];\n        } else {\n            if (key === 'lib_materials') {\n                api.data[key] = api.data[key].map(material => {\n                    const { materialType, id } = material;\n                    return { type: materialType, id };\n                });\n                console.log('lib_materials' + key, api.data[key]);\n            }\n        }\n    }\n    api.url = api.url.split('?')[0] + '?' + new URLSearchParams(api.query);\n}\n\nreturn api;\n",
                  "adaptor": "",
                  "messages": {
                  }
                },
                "body": [
                  {
                    "type": "input-text",
                    "name": "name",
                    "label": "任务名称",
                    "mode": "normal",
                    "id": "u:3a559143d4d0",
                    "required": true
                  },
                  {
                    "type": "nested-select",
                    "name": "patient_ids",
                    "label": "目标客户",
                    "mode": "normal",
                    "id": "u:cf62f9bffada",
                    "onlyChildren": true,
                    "searchable": true,
                    "onlyLeaf": true,
                    "multiple": true,
                    "size": "lg",
                    "source": {
                      "url": "/api/admin/patientcenter/patient/list",
                      "method": "post",
                      "messages": {
                      },
                      "adaptor": "console.log(payload)\nreturn payload",
                      "dataType": "json",
                      "data": {
                        "patientDtoFilter": {
                          "patientName": "",
                          "nationalId": "",
                          "phone": "",
                          "patientId": "",
                          "dataPermissionsUser": ""
                        },
                        "pageParam": {
                          "pageNum": "1",
                          "pageSize": "1000"
                        }
                      }
                    },
                    "labelField": "patientName",
                    "valueField": "patientId",
                    "clearable": true,
                    "placeholder": "请选择目标患者",
                    "hideNodePathLabel": true,
                    "joinValues": false,
                    "required": true,
                    "extractValue": true
                  },
                  {
                    "type": "select",
                    "label": "触发条件",
                    "name": "trigger_type",
                    "options": [
                      {
                        "label": "定时型",
                        "value": 1
                      }
                    ],
                    "id": "u:0b717e64c033",
                    "mode": "normal",
                    "multiple": false,
                    "required": true,
                    "value": 1
                  },
                  {
                    "type": "input-datetime",
                    "name": "start_time",
                    "label": "开始时间",
                    "id": "u:98ee782be7d1",
                    "inputFormat": "YYYY-MM-DD HH:mm:ss",
                    "placeholder": "请选择日期以及时间",
                    "format": "YYYY-MM-DD HH:mm:ss",
                    "minDate": "",
                    "maxDate": "",
                    "value": "",
                    "mode": "normal"
                  },
                  {
                    "type": "select",
                    "name": "repeating_rules",
                    "label": "重复规则",
                    "id": "u:ba434a14b747",
                    "options": [
                      {
                        "label": "不重复",
                        "value": 0
                      },
                      {
                        "label": "每天重复",
                        "value": 1
                      },
                      {
                        "label": "每周重复",
                        "value": 2
                      },
                      {
                        "label": "指定日期重复",
                        "value": 4
                      }
                    ],
                    "mode": "normal",
                    "multiple": false,
                    "value": 0
                  },
                  {
                    "type": "button-group-select",
                    "name": "weekly_repeat_days",
                    "label": "任务生效后",
                    "id": "u:811b3b103424",
                    "mode": "normal",
                    "inline": false,
                    "options": [
                      {
                        "label": "第1天",
                        "value": 1
                      },
                      {
                        "label": "第2天",
                        "value": 2
                      },
                      {
                        "label": "第3天",
                        "value": 3
                      },
                      {
                        "label": "第4天",
                        "value": 4
                      },
                      {
                        "label": "第5天",
                        "value": 5
                      },
                      {
                        "label": "第6天",
                        "value": 6
                      },
                      {
                        "label": "第7天",
                        "value": 7
                      }
                    ],
                    "multiple": true,
                    "joinValues": false,
                    "extractValue": true,
                    "hiddenOn": "data.repeating_rules != 2",
                    "clearValueOnHidden": true,
                    "static": false,
                    "value": [
                      1
                    ],
                    "required": true
                  },
                  {
                    "type": "fieldSet",
                    "id": "u:8deb319a96fa",
                    "title": "选择任务重复发送日期(数字之间需要用、隔开)",
                    "collapsable": false,
                    "body": [
                      {
                        "type": "group",
                        "body": [
                          {
                            "type": "input-text",
                            "label": "任务开始后第",
                            "name": "offset_date_values",
                            "id": "u:a3b16263a708",
                            "clearValueOnHidden": true
                          },
                          {
                            "type": "select",
                            "label": "",
                            "name": "offset_date_unit",
                            "options": [
                              {
                                "label": "天",
                                "value": 4
                              },
                              {
                                "label": "周",
                                "value": 5
                              },
                              {
                                "label": "月",
                                "value": 6
                              },
                              {
                                "label": "年",
                                "value": 7
                              }
                            ],
                            "id": "u:21d8793931a6",
                            "mode": "normal",
                            "multiple": false,
                            "clearValueOnHidden": true,
                            "value": 4
                          }
                        ],
                        "id": "u:d36a2e0a8939"
                      }
                    ],
                    "subFormMode": "",
                    "className": "Collapse--base",
                    "hiddenOn": "data.repeating_rules != 4"
                  },
                  {
                    "type": "input-group",
                    "label": "重复持续时长",
                    "mode": "normal",
                    "id": "u:54c735b0afd6",
                    "body": [
                      {
                        "type": "select",
                        "label": "文本",
                        "name": "duration_value",
                        "id": "u:7443d80b0039",
                        "options": [
                          {
                            "label": "1",
                            "value": 1
                          },
                          {
                            "label": "2",
                            "value": 2
                          },
                          {
                            "label": "3",
                            "value": 3
                          },
                          {
                            "label": "4",
                            "value": 4
                          },
                          {
                            "label": "5",
                            "value": 5
                          },
                          {
                            "label": "6",
                            "value": 6
                          },
                          {
                            "label": "7",
                            "value": 7
                          },
                          {
                            "label": "8",
                            "value": 8
                          },
                          {
                            "label": "9",
                            "value": 9
                          },
                          {
                            "label": "10",
                            "value": 10
                          },
                          {
                            "label": "11",
                            "value": 11
                          },
                          {
                            "label": "12",
                            "value": 12
                          },
                          {
                            "label": "13",
                            "value": 13
                          },
                          {
                            "label": "14",
                            "value": 14
                          },
                          {
                            "label": "15",
                            "value": 15
                          },
                          {
                            "label": "16",
                            "value": 16
                          },
                          {
                            "label": "17",
                            "value": 17
                          },
                          {
                            "label": "18",
                            "value": 18
                          },
                          {
                            "label": "19",
                            "value": 19
                          },
                          {
                            "label": "20",
                            "value": 20
                          },
                          {
                            "label": "21",
                            "value": 21
                          },
                          {
                            "label": "22",
                            "value": 22
                          },
                          {
                            "label": "23",
                            "value": 23
                          },
                          {
                            "label": "24",
                            "value": 24
                          },
                          {
                            "label": "25",
                            "value": 25
                          },
                          {
                            "label": "26",
                            "value": 26
                          },
                          {
                            "label": "27",
                            "value": 27
                          },
                          {
                            "label": "28",
                            "value": 28
                          },
                          {
                            "label": "29",
                            "value": 29
                          },
                          {
                            "label": "30",
                            "value": 30
                          }
                        ],
                        "multiple": false,
                        "value": 1,
                        "required": true
                      },
                      {
                        "type": "select",
                        "name": "duration_unit",
                        "options": [
                          {
                            "label": "天",
                            "value": 4
                          },
                          {
                            "label": "周",
                            "value": 5
                          },
                          {
                            "label": "月",
                            "value": 6
                          },
                          {
                            "label": "年",
                            "value": 7
                          }
                        ],
                        "value": 5,
                        "id": "u:6cd3bc0ea86c",
                        "multiple": false,
                        "required": true
                      }
                    ],
                    "required": true,
                    "hiddenOn": "data.repeating_rules == 4||data.repeating_rules == 0"
                  },
                  {
                    "type": "textarea",
                    "label": "任务内容",
                    "mode": "normal",
                    "id": "u:8dfadf06e6ae",
                    "name": "content",
                    "minRows": 3,
                    "maxRows": 20
                  },
                  {
                    "type": "picker",
                    "label": "素材",
                    "mode": "normal",
                    "id": "u:81ae9353c86b",
                    "name": "lib_materials",
                    "multiple": true,
                    "joinValues": false,
                    "valueField": "task_material_id",
                    "labelField": "title",
                    "size": "lg",
                    "value": "",
                    "pickerSchema": {
                      "id": "u:4e9cfd2a2de9",
                      "mode": "table",
                      "name": "thelist",
                      "draggable": false,
                      "headerToolbar": {
                        "wrapWithPanel": false,
                        "type": "form",
                        "className": "text-right",
                        "target": "thelist",
                        "mode": "inline",
                        "body": [
                          {
                            "type": "button-group-select",
                            "name": "materialType",
                            "label": "类型",
                            "inline": false,
                            "options": [
                              {
                                "label": "全部",
                                "value": 0
                              },
                              {
                                "label": "富文本",
                                "value": 2
                              },
                              {
                                "label": "纯文本",
                                "value": 1
                              },
                              {
                                "label": "链接",
                                "value": 3
                              }
                            ],
                            "id": "u:46bedb90b7e6",
                            "multiple": false,
                            "value": 0
                          },
                          {
                            "type": "input-text",
                            "name": "title",
                            "addOn": {
                              "type": "submit",
                              "label": "搜索",
                              "level": "primary",
                              "icon": "fa fa-search pull-left",
                              "id": "u:4051a516bea0"
                            },
                            "id": "u:436a531ae90c"
                          },
                          {
                            "type": "button-group-select",
                            "name": "type",
                            "inline": false,
                            "options": [
                              {
                                "label": "企业素材",
                                "value": 2
                              },
                              {
                                "label": "个人素材",
                                "value": 1
                              }
                            ],
                            "id": "u:46bedb90b7e6",
                            "multiple": false,
                            "value": 2
                          }
                        ],
                        "id": "u:224d46a01acf",
                        "submitOnChange": true
                      },
                      "footerToolbar": [
                        {
                          "type": "statistics",
                          "align": "left"
                        },
                        {
                          "type": "pagination",
                          "align": "right"
                        },
                        {
                          "type": "switch-per-page",
                          "tpl": "内容",
                          "wrapperComponent": "",
                          "id": "u:9138cd5259bc",
                          "align": "right"
                        }
                      ],
                      "columns": [
                        {
                          "name": "title",
                          "label": "标题",
                          "type": "text",
                          "id": "u:831a9a9c1291",
                          "placeholder": "-",
                          "width": 100,
                          "className": "word-break ",
                          "align": "left"
                        },
                        {
                          "name": "materialType",
                          "label": "类型",
                          "type": "mapping",
                          "id": "u:0a0cb7c7f5ae",
                          "placeholder": "-",
                          "width": 50,
                          "className": "word-break ",
                          "map": {
                            "1": "纯文本",
                            "2": "富文本",
                            "3": "链接"
                          },
                          "align": "left"
                        },
                        {
                          "name": "description",
                          "label": "内容描述",
                          "type": "text",
                          "id": "u:b31367aa876d",
                          "placeholder": "-",
                          "width": 150,
                          "className": "word-break ",
                          "style": {
                            "-webkit-line-clamp": "2",
                            "display": "-webkit-box",
                            "-webkit-box-orient": "vertical",
                            "text-overflow": "inherit",
                            "overflow": "hidden",
                            "text-align": "center",
                            "padding": "2px",
                            "position": "absolute",
                            "top": "50%",
                            "transform": "translateY(-50%)"
                          },
                          "popOver": false,
                          "align": "center"
                        }
                      ],
                      "perPage": 20,
                      "perPageField": "pageSize",
                      "perPageAvailable": [
                        10,
                        20,
                        50
                      ],
                      "messages": {
                      },
                      "primaryField": "task_material_id",
                      "defaultParams": {
                      },
                      "pageField": "pageNum"
                    },
                    "clearValueOnHidden": true,
                    "source": {
                      "method": "post",
                      "url": "/api/admin/materialcenter/allMaterial/list",
                      "messages": {
                      },
                      "dataType": "json",
                      "data": {
                        "pageParam": {
                          "pageNum": "${pageNum}",
                          "pageSize": "${pageSize}"
                        },
                        "allMaterialDtoFilter": {
                          "title": "${title}",
                          "type": "${type}",
                          "materialType": "${materialType}",
                          "labelIdListString": "${label}"
                        },
                        "orderParm": [
                          {
                            "fieldName": "createTime",
                            "asc": 1
                          }
                        ]
                      },
                      "adaptor": "console.log(payload);\nconst items = payload.data.items;\n\nconst newitems = [];\n\nfor (const e of items) {\n    if (e.materialType === '1') {\n        e.description = e.content;\n    }\n    newitems.push(e);\n}\n\npayload.data.items = items;\nconsole.log(payload);\nreturn payload;\n"
                    }
                  },
                  {
                    "type": "picker",
                    "name": "questionnaire_dataset",
                    "label": "问卷",
                    "mode": "normal",
                    "id": "u:81ae9353c86a",
                    "multiple": true,
                    "value": "",
                    "size": "lg",
                    "source": {
                      "url": "https://dev-aio-form.zuoshouyisheng.com/api/surely/surelyform/rest/surveys?sort=-updatedAt&status=3&take=20&skip=0&labelIdListString=",
                      "method": "get",
                      "messages": {
                      },
                      "adaptor": "console.log(payload);\nconst items = payload.data.list;\nconst total = payload.data.count\n\npayload.data.items = items;\npayload.data.total = total;\nconsole.log(payload);\nreturn payload;\n",
                      "requestAdaptor": ""
                    },
                    "joinValues": false,
                    "valueField": "publishId",
                    "labelField": "title",
                    "pickerSchema": {
                      "mode": "table",
                      "name": "thelist",
                      "draggable": false,
                      "headerToolbar": {
                        "wrapWithPanel": false,
                        "type": "form",
                        "className": "text-right",
                        "target": "thelist",
                        "mode": "inline",
                        "body": [
                          {
                            "type": "select",
                            "name": "status",
                            "id": "u:6fffcd8304f2",
                            "options": [
                              {
                                "label": "未开始",
                                "value": 2
                              },
                              {
                                "label": "进行中",
                                "value": 3
                              },
                              {
                                "label": "已完成",
                                "value": 4
                              }
                            ],
                            "multiple": false,
                            "mode": "inline",
                            "size": "lg",
                            "value": 3
                          },
                          {
                            "type": "input-text",
                            "name": "keyword",
                            "id": "u:436a531ae90c",
                            "addOn": {
                              "type": "submit",
                              "label": "搜索",
                              "level": "primary",
                              "icon": "fa fa-search pull-left",
                              "id": "u:4051a516bea0"
                            },
                            "size": "lg",
                            "placeholder": "搜索问卷名称"
                          }
                        ],
                        "id": "u:224d46a01acf",
                        "canAccessSuperData": false
                      },
                      "footerToolbar": [
                        {
                          "type": "statistics",
                          "align": "left"
                        },
                        {
                          "type": "pagination",
                          "align": "right"
                        },
                        {
                          "type": "switch-per-page",
                          "tpl": "内容",
                          "wrapperComponent": "",
                          "id": "u:9138cd5259bc",
                          "align": "right"
                        }
                      ],
                      "columns": [
                        {
                          "name": "title",
                          "label": "名称",
                          "type": "text",
                          "id": "u:831a9a9c1291",
                          "placeholder": "-",
                          "width": 100,
                          "className": "word-break ",
                          "align": "left"
                        },
                        {
                          "name": "mode",
                          "label": "表单类型",
                          "type": "mapping",
                          "id": "u:0a0cb7c7f5ae",
                          "placeholder": "-",
                          "width": 50,
                          "className": "word-break ",
                          "map": {
                            "1": "经典",
                            "2": "幻灯片"
                          },
                          "align": "left"
                        },
                        {
                          "name": "labelName",
                          "label": "标签",
                          "type": "text",
                          "id": "u:b31367aa876d",
                          "placeholder": "-",
                          "width": 150,
                          "className": "word-break ",
                          "style": {
                            "-webkit-line-clamp": "2",
                            "display": "-webkit-box",
                            "-webkit-box-orient": "vertical",
                            "text-overflow": "inherit",
                            "overflow": "hidden",
                            "text-align": "center",
                            "padding": "2px",
                            "position": "absolute",
                            "top": "50%",
                            "transform": "translateY(-50%)"
                          },
                          "popOver": false,
                          "align": "center"
                        }
                      ],
                      "id": "u:4e9cfd2a2de9",
                      "perPage": 20,
                      "perPageField": "pageSize",
                      "perPageAvailable": [
                        10,
                        20,
                        50
                      ],
                      "messages": {
                      },
                      "primaryField": "task_material_id",
                      "defaultParams": {
                      },
                      "pageField": "pageNum"
                    },
                    "clearValueOnHidden": true
                  },
                  {
                    "type": "picker",
                    "name": "task_materials",
                    "label": "任务素材",
                    "mode": "normal",
                    "id": "u:81ae9353c86a",
                    "multiple": true,
                    "size": "lg",
                    "source": {
                      "url": "/api/aio-program/task_material/list?material_type=$material_type&page=$page&page_size=$page_size",
                      "method": "post",
                      "messages": {
                      },
                      "dataType": "json"
                    },
                    "labelField": "title",
                    "valueField": "task_material_id",
                    "joinValues": false,
                    "value": "",
                    "pickerSchema": {
                      "mode": "table",
                      "name": "thelist",
                      "draggable": true,
                      "headerToolbar": {
                        "wrapWithPanel": false,
                        "type": "form",
                        "className": "text-right",
                        "target": "thelist",
                        "mode": "inline",
                        "body": [
                          {
                            "type": "input-text",
                            "name": "title",
                            "addOn": {
                              "type": "submit",
                              "label": "搜索",
                              "level": "primary",
                              "icon": "fa fa-search pull-left",
                              "id": "u:4051a516bea0"
                            },
                            "id": "u:436a531ae90c"
                          },
                          {
                            "type": "button-group-select",
                            "name": "material_type",
                            "label": "类型",
                            "inline": false,
                            "options": [
                              {
                                "label": "全部",
                                "value": 0
                              },
                              {
                                "label": "富文本",
                                "value": 2
                              },
                              {
                                "label": "纯文本",
                                "value": 1
                              },
                              {
                                "label": "链接",
                                "value": 3
                              },
                              {
                                "label": "问卷",
                                "value": 4
                              }
                            ],
                            "id": "u:46bedb90b7e6",
                            "multiple": false,
                            "value": 1
                          }
                        ],
                        "id": "u:224d46a01acf"
                      },
                      "footerToolbar": [
                        {
                          "type": "statistics",
                          "align": "left"
                        },
                        {
                          "type": "pagination",
                          "align": "right"
                        },
                        {
                          "type": "switch-per-page",
                          "tpl": "内容",
                          "wrapperComponent": "",
                          "id": "u:9138cd5259bc",
                          "align": "right"
                        }
                      ],
                      "columns": [
                        {
                          "name": "title",
                          "label": "素材标题",
                          "type": "text",
                          "id": "u:89650c95c349",
                          "placeholder": "-",
                          "width": 100,
                          "className": "word-break ",
                          "align": "left"
                        },
                        {
                          "name": "material_type",
                          "label": "素材类型",
                          "type": "text",
                          "id": "u:5083b08e8cce",
                          "placeholder": "-",
                          "width": 100,
                          "className": "word-break "
                        },
                        {
                          "name": "content",
                          "label": "素材内容",
                          "type": "text",
                          "id": "u:5da3bab9b391",
                          "placeholder": "-",
                          "width": "",
                          "className": "word-break "
                        },
                        {
                          "name": "task_id",
                          "label": "任务id",
                          "type": "text",
                          "id": "u:1c9e6d15bb58",
                          "placeholder": "-",
                          "width": 100,
                          "className": "word-break "
                        },
                        {
                          "name": "task_name",
                          "label": "任务名称",
                          "type": "text",
                          "id": "u:8815992cde69",
                          "placeholder": "-",
                          "width": 100,
                          "className": "word-break "
                        },
                        {
                          "type": "text",
                          "label": "执行者",
                          "width": 100,
                          "name": "user_name",
                          "id": "u:8e83f296bf63",
                          "placeholder": "-",
                          "className": "word-break "
                        },
                        {
                          "type": "text",
                          "label": "目标用户",
                          "name": "patient_name",
                          "id": "u:8dcb5d564ca3",
                          "placeholder": "-",
                          "className": "word-break ",
                          "width": 150
                        }
                      ],
                      "id": "u:4e9cfd2a2de9",
                      "perPage": 20,
                      "perPageField": "page_size",
                      "perPageAvailable": [
                        10
                      ],
                      "messages": {
                      },
                      "primaryField": "task_material_id",
                      "defaultParams": {
                      }
                    },
                    "clearValueOnHidden": true,
                    "disabled": false,
                    "hidden": true
                  },
                  {
                    "type": "input-group",
                    "label": "任务完成时间",
                    "mode": "normal",
                    "id": "u:54c735b0afd6",
                    "body": [
                      {
                        "type": "select",
                        "label": "文本",
                        "name": "task_due_time_value",
                        "id": "u:7443d80b0039",
                        "options": [
                          {
                            "label": "1",
                            "value": 1
                          },
                          {
                            "label": "2",
                            "value": 2
                          },
                          {
                            "label": "3",
                            "value": 3
                          },
                          {
                            "label": "4",
                            "value": 4
                          },
                          {
                            "label": "5",
                            "value": 5
                          },
                          {
                            "label": "6",
                            "value": 6
                          },
                          {
                            "label": "7",
                            "value": 7
                          },
                          {
                            "label": "8",
                            "value": 8
                          },
                          {
                            "label": "9",
                            "value": 9
                          },
                          {
                            "label": "10",
                            "value": 10
                          },
                          {
                            "label": "11",
                            "value": 11
                          },
                          {
                            "label": "12",
                            "value": 12
                          },
                          {
                            "label": "13",
                            "value": 13
                          },
                          {
                            "label": "14",
                            "value": 14
                          },
                          {
                            "label": "15",
                            "value": 15
                          },
                          {
                            "label": "16",
                            "value": 16
                          },
                          {
                            "label": "17",
                            "value": 17
                          },
                          {
                            "label": "18",
                            "value": 18
                          },
                          {
                            "label": "19",
                            "value": 19
                          },
                          {
                            "label": "20",
                            "value": 20
                          },
                          {
                            "label": "21",
                            "value": 21
                          },
                          {
                            "label": "22",
                            "value": 22
                          },
                          {
                            "label": "23",
                            "value": 23
                          },
                          {
                            "label": "24",
                            "value": 24
                          },
                          {
                            "label": "25",
                            "value": 25
                          },
                          {
                            "label": "26",
                            "value": 26
                          },
                          {
                            "label": "27",
                            "value": 27
                          },
                          {
                            "label": "28",
                            "value": 28
                          },
                          {
                            "label": "29",
                            "value": 29
                          },
                          {
                            "label": "30",
                            "value": 30
                          }
                        ],
                        "multiple": false,
                        "value": 1,
                        "required": true
                      },
                      {
                        "type": "select",
                        "name": "task_due_time_unit",
                        "options": [
                          {
                            "label": "时",
                            "value": 3
                          },
                          {
                            "label": "天",
                            "value": 4
                          },
                          {
                            "label": "周",
                            "value": 5
                          },
                          {
                            "label": "月",
                            "value": 6
                          },
                          {
                            "label": "年",
                            "value": 7
                          }
                        ],
                        "value": 3,
                        "id": "u:6cd3bc0ea86c",
                        "multiple": false,
                        "required": true
                      }
                    ],
                    "required": true
                  },
                  {
                    "type": "select",
                    "name": "completion_conditions",
                    "label": "任务完成条件",
                    "mode": "normal",
                    "id": "u:e19162f2407f",
                    "options": [
                      {
                        "label": "人工点击完成按钮",
                        "value": 1
                      }
                    ],
                    "required": true,
                    "multiple": false,
                    "value": 1
                  },
                  {
                    "type": "nested-select",
                    "name": "user_ids",
                    "label": "执行者",
                    "mode": "normal",
                    "id": "u:cf62f9bffada",
                    "multiple": true,
                    "required": true,
                    "onlyChildren": true,
                    "searchable": true,
                    "onlyLeaf": true,
                    "size": "lg",
                    "source": {
                      "url": "/api/admin/upms/sysUser/getFollowerList",
                      "method": "get",
                      "messages": {
                      },
                      "adaptor": "",
                      "dataType": "json"
                    },
                    "labelField": "label",
                    "valueField": "value",
                    "clearable": true,
                    "placeholder": "请选择执行者",
                    "hideNodePathLabel": true,
                    "joinValues": false,
                    "extractValue": true
                  }
                ],
                "id": "u:174002ed55b6",
                "persistData": "create_task_rule",
                "clearPersistDataAfterSubmit": true
              }
            ],
            "id": "u:0dfa71db8ab5"
          },
          "id": "u:c59d84dde548"
        },
        "bulkActions"
      ],
      "filter": {
        "title": "查询条件",
        "columnCount": 3,
        "mode": "horizontal",
        "body": [
          {
            "type": "nested-select",
            "label": "用户",
            "name": "patient_ids",
            "id": "u:cf62f9bffada",
            "multiple": true,
            "clearable": true,
            "onlyChildren": true,
            "searchable": true,
            "onlyLeaf": true,
            "size": "lg",
            "source": {
              "url": "/api/admin/patientcenter/patient/list",
              "method": "post",
              "messages": {
              },
              "adaptor": "console.log(payload)\nreturn payload",
              "dataType": "json",
              "data": {
                "patientDtoFilter": {
                  "patientName": "",
                  "nationalId": "",
                  "phone": "",
                  "patientId": "",
                  "dataPermissionsUser": ""
                },
                "pageParam": {
                  "pageNum": "1",
                  "pageSize": "1000"
                }
              }
            },
            "labelField": "patientName",
            "valueField": "patientId",
            "placeholder": "请选择目标患者",
            "hideNodePathLabel": true,
            "joinValues": true
          },
          {
            "type": "input-date-range",
            "label": "开始时间",
            "name": "start_timeline",
            "id": "u:e9839f68a405",
            "startPlaceholder": "启始时间",
            "format": "YYYY-MM-DD",
            "utc": false,
            "autoFill": {
            },
            "validateOnChange": true,
            "inputFormat": "YYYY-MM-DD",
            "placeholder": "请选择日期范围",
            "minDate": "",
            "maxDate": "",
            "ranges": [
              "yesterday",
              "7daysago",
              "prevweek",
              "thismonth",
              "prevmonth",
              "prevquarter"
            ]
          },
          {
            "type": "select",
            "label": "状态",
            "name": "status",
            "id": "u:dae5a648d100",
            "clearable": true,
            "multiple": false,
            "checkAll": true,
            "options": [
              {
                "label": "全部",
                "value": ""
              },
              {
                "label": "生效中",
                "value": 1
              },
              {
                "label": "暂停中",
                "value": 0
              }
            ],
            "defaultCheckAll": false,
            "checkAllLabel": "",
            "clearValueOnHidden": false,
            "hidden": false,
            "showInvalidMatch": false,
            "value": 1
          },
          {
            "type": "nested-select",
            "label": "执行者",
            "name": "executor_ids",
            "id": "u:cf62f9bffada",
            "clearable": true,
            "searchable": true,
            "multiple": true,
            "onlyChildren": true,
            "onlyLeaf": true,
            "size": "lg",
            "source": {
              "method": "get",
              "messages": {
              },
              "adaptor": "",
              "dataType": "json",
              "url": "/api/admin/upms/sysUser/getFollowerList"
            },
            "labelField": "label",
            "valueField": "value",
            "placeholder": "请选择执行者",
            "hideNodePathLabel": true,
            "joinValues": true,
            "extractValue": true,
            "checkAll": false
          },
          {
            "type": "input-text",
            "label": "任务名称",
            "name": "name",
            "id": "u:a1a2d85ebf39"
          },
          {
            "type": "input-text",
            "label": "任务内容",
            "name": "content",
            "id": "u:41bea61d1654"
          },
          {
            "type": "hidden",
            "name": "executor_type",
            "clearable": true,
            "searchable": false,
            "multiple": false,
            "options": [
              {
                "label": "运营人员",
                "value": 2
              }
            ],
            "value": 2,
            "id": "u:dae5a648d100",
            "label": "执行者类型"
          }
        ],
        "id": "u:bd7b28363b81",
        "resetAfterSubmit": false,
        "actions": [
          {
            "type": "button",
            "label": "查询",
            "onEvent": {
              "click": {
                "actions": [
                  {
                    "componentId": "u:bd7b28363b81",
                    "args": {
                    },
                    "actionType": "submit"
                  }
                ]
              }
            },
            "id": "u:8ae48a7ccc04",
            "level": "primary",
            "disabled": false
          },
          {
            "type": "button",
            "label": "重置",
            "onEvent": {
              "click": {
                "actions": [
                  {
                    "componentId": "u:bd7b28363b81",
                    "actionType": "reset"
                  }
                ]
              }
            },
            "id": "u:2481943a753b"
          }
        ],
        "wrapWithPanel": true
      },
      "alwaysShowPagination": true,
      "perPageField": "page_size",
      "pageField": "page",
      "perPage": 20,
      "perPageAvailable": [
        10
      ],
      "messages": {
      }
    }
  ],
  "id": "u:920bc5473026",
  "asideResizor": false,
  "style": {
    "boxShadow": " 0px 0px 0px 0px transparent"
  },
  "pullRefresh": {
    "disabled": true
  },
  "title": "任务规则管理"
}