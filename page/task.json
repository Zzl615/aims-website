{
  "type": "button",
  "label": "编辑",
  "actionType": "dialog",
  "id": "u:182673fb61f8",
  "dialog": {
    "type": "dialog",
    "title": "提示",
    "body": [
      {
        "type": "tpl",
        "tpl": "仅修改当前任务还是整体任务？",
        "wrapperComponent": "",
        "inline": false,
        "id": "u:6a7b602110fb"
      }
    ],
    "actions": [
      {
        "type": "button",
        "actionType": "dialog",
        "label": "修改当前任务",
        "dialog": {
          "title": "编辑",
          "body": [
            {
              "type": "form",
              "id": "u:dc5e68da3597",
              "api": "/api/aio-program/individual_task/edit",
              "body": [
                {
                  "type": "input-text",
                  "id": "u:0b320806e951",
                  "label": "ID",
                  "name": "task_id",
                  "mode": "normal",
                  "static": true,
                  "disabled": false
                },
                {
                  "type": "input-text",
                  "id": "u:3a559143d4d0",
                  "name": "name",
                  "label": "任务名称",
                  "mode": "normal",
                  "required": true
                },
                {
                  "type": "nested-select",
                  "label": "患者",
                  "name": "patient_id",
                  "id": "u:cf62f9bffada",
                  "mode": "normal",
                  "onlyChildren": true,
                  "searchable": true,
                  "onlyLeaf": true,
                  "multiple": false,
                  "size": "lg",
                  "source": {
                    "url": "/api/admin/patientcenter/patient/list",
                    "method": "post",
                    "messages": {
                    },
                    "adaptor": "console.log(payload)\nreturn payload",
                    "dataType": "json",
                    "data": {
                      "patientDtoFilter": {
                        "patientName": "",
                        "nationalId": "",
                        "phone": "",
                        "patientId": "",
                        "dataPermissionsUser": ""
                      },
                      "pageParam": {
                        "pageNum": "1",
                        "pageSize": "1000"
                      }
                    }
                  },
                  "labelField": "patientName",
                  "valueField": "patientId",
                  "clearable": true,
                  "placeholder": "请选择目标患者",
                  "hideNodePathLabel": true,
                  "joinValues": true,
                  "required": true
                },
                {
                  "type": "select",
                  "name": "trigger_type",
                  "label": "触发条件",
                  "id": "u:0b717e64c033",
                  "mode": "normal",
                  "options": [
                    {
                      "label": "定时型",
                      "value": 1
                    }
                  ],
                  "multiple": false,
                  "required": true,
                  "value": 1
                },
                {
                  "type": "input-datetime",
                  "name": "start_time",
                  "label": "开始时间",
                  "id": "u:98ee782be7d1",
                  "mode": "normal",
                  "inputFormat": "YYYY-MM-DD HH:mm:ss",
                  "placeholder": "请选择日期以及时间",
                  "format": "YYYY-MM-DD HH:mm:ss",
                  "minDate": "",
                  "maxDate": "",
                  "value": "",
                  "required": true
                },
                {
                  "type": "textarea",
                  "name": "content",
                  "label": "任务内容",
                  "mode": "normal",
                  "id": "u:8dfadf06e6ae",
                  "minRows": 3,
                  "maxRows": 20,
                  "required": true
                },
                {
                  "type": "input-repeat",
                  "name": "task_due_time",
                  "label": "任务完成时间",
                  "mode": "normal",
                  "id": "u:c520ac7d5c17",
                  "options": "hourly,daily,weekly,monthly,yearly",
                  "required": true,
                  "validateApi": "",
                  "placeholder": "请选择"
                },
                {
                  "type": "select",
                  "name": "completion_conditions",
                  "label": "任务完成条件",
                  "mode": "normal",
                  "id": "u:e19162f2407f",
                  "options": [
                    {
                      "label": "人工点击完成按钮",
                      "value": 1
                    }
                  ],
                  "multiple": false,
                  "value": 1,
                  "required": true
                },
                {
                  "type": "textarea",
                  "name": "work_summary",
                  "label": "工作小结",
                  "mode": "normal",
                  "id": "u:8dfadf06e6ae"
                },
                {
                  "type": "nested-select",
                  "name": "user_id",
                  "label": "执行者",
                  "mode": "normal",
                  "id": "u:cf62f9bffada",
                  "onlyChildren": true,
                  "searchable": true,
                  "onlyLeaf": true,
                  "multiple": false,
                  "size": "lg",
                  "source": {
                    "url": "/api/admin/upms/sysUser/getFollowerList",
                    "method": "get",
                    "messages": {
                    },
                    "adaptor": "",
                    "dataType": "json"
                  },
                  "labelField": "label",
                  "valueField": "value",
                  "clearable": true,
                  "placeholder": "请选择执行者",
                  "hideNodePathLabel": true,
                  "required": true
                }
              ]
            }
          ],
          "type": "dialog",
          "id": "u:f060a93dcf72"
        },
        "id": "u:4ceaa72cb347"
      },
      {
        "type": "button",
        "actionType": "dialog",
        "label": "修改整体任务",
        "dialog": {
          "type": "dialog",
          "title": "编辑",
          "body": [
            {
              "type": "form",
              "id": "u:dc5e68da3597",
              "api": "/api/aio-program/task_rule/edit",
              "body": [
                {
                  "type": "input-text",
                  "id": "u:0b320806e951",
                  "label": "ID",
                  "name": "task_rule_id",
                  "mode": "normal",
                  "disabled": false,
                  "static": true
                },
                {
                  "type": "input-text",
                  "id": "u:3a559143d4d0",
                  "name": "name",
                  "label": "任务名称",
                  "mode": "normal",
                  "required": true,
                  "clearable": true
                },
                {
                  "type": "nested-select",
                  "label": "患者",
                  "name": "patient_ids",
                  "id": "u:cf62f9bffada",
                  "mode": "normal",
                  "onlyChildren": true,
                  "searchable": true,
                  "onlyLeaf": true,
                  "multiple": true,
                  "size": "lg",
                  "source": {
                    "url": "/api/admin/patientcenter/patient/list",
                    "method": "post",
                    "messages": {
                    },
                    "adaptor": "console.log(payload)\nreturn payload",
                    "dataType": "json",
                    "data": {
                      "patientDtoFilter": {
                        "patientName": "",
                        "nationalId": "",
                        "phone": "",
                        "patientId": "",
                        "dataPermissionsUser": ""
                      },
                      "pageParam": {
                        "pageNum": "1",
                        "pageSize": "1000"
                      }
                    }
                  },
                  "labelField": "patientName",
                  "valueField": "patientId",
                  "clearable": true,
                  "placeholder": "请选择目标患者",
                  "hideNodePathLabel": true,
                  "joinValues": true,
                  "required": true
                },
                {
                  "type": "select",
                  "name": "trigger_type",
                  "label": "触发条件",
                  "id": "u:0b717e64c033",
                  "mode": "normal",
                  "options": [
                    {
                      "label": "定时型",
                      "value": 1
                    }
                  ],
                  "multiple": false,
                  "required": true,
                  "value": 1
                },
                {
                  "type": "input-datetime",
                  "name": "start_time",
                  "label": "开始时间",
                  "id": "u:98ee782be7d1",
                  "mode": "normal",
                  "inputFormat": "YYYY-MM-DD HH:mm:ss",
                  "placeholder": "请选择日期以及时间",
                  "format": "YYYY-MM-DD HH:mm:ss",
                  "minDate": "",
                  "maxDate": "",
                  "value": "",
                  "required": true
                },
                {
                  "type": "select",
                  "name": "repeating_rules",
                  "label": "重复规则",
                  "mode": "normal",
                  "id": "u:ba434a14b747",
                  "options": [
                    {
                      "label": "每天重复",
                      "value": "1"
                    },
                    {
                      "label": "每周重复",
                      "value": "2"
                    },
                    {
                      "label": "间隔重复",
                      "value": "3"
                    }
                  ],
                  "multiple": false,
                  "required": true
                },
                {
                  "type": "button-group-select",
                  "name": "weekly_repeat_days",
                  "label": "任务生效后",
                  "mode": "normal",
                  "id": "u:811b3b103424",
                  "options": [
                    {
                      "label": "第1天",
                      "value": 1
                    },
                    {
                      "label": "第2天",
                      "value": 2
                    },
                    {
                      "label": "第3天",
                      "value": 3
                    },
                    {
                      "label": "第4天",
                      "value": 4
                    },
                    {
                      "label": "第5天",
                      "value": 5
                    },
                    {
                      "label": "第6天",
                      "value": 6
                    },
                    {
                      "label": "第7天",
                      "value": 7
                    }
                  ],
                  "inline": false,
                  "multiple": true,
                  "joinValues": false,
                  "extractValue": true,
                  "hiddenOn": "data.repeating_rules != 2"
                },
                {
                  "type": "fieldSet",
                  "id": "u:8deb319a96fa",
                  "title": "选择任务发送间隔",
                  "collapsable": false,
                  "body": [
                    {
                      "type": "group",
                      "body": [
                        {
                          "type": "input-text",
                          "label": "任务生效后",
                          "name": "interval_repeat_value",
                          "id": "u:a3b16263a708"
                        },
                        {
                          "type": "select",
                          "label": "",
                          "name": "interval_repeat_unit",
                          "options": [
                            {
                              "label": "天",
                              "value": 4
                            },
                            {
                              "label": "周",
                              "value": 5
                            },
                            {
                              "label": "月",
                              "value": 6
                            },
                            {
                              "label": "年",
                              "value": 7
                            }
                          ],
                          "id": "u:21d8793931a6",
                          "mode": "normal"
                        }
                      ],
                      "id": "u:d36a2e0a8939"
                    }
                  ],
                  "subFormMode": "",
                  "className": "Collapse--base",
                  "hiddenOn": "data.repeating_rules != 3"
                },
                {
                  "type": "input-repeat",
                  "name": "duration",
                  "label": "重复持续时长",
                  "mode": "normal",
                  "id": "u:c520ac7d5c17",
                  "options": "daily,weekly,monthly,yearly",
                  "required": true,
                  "validateApi": "",
                  "placeholder": "请选择"
                },
                {
                  "type": "textarea",
                  "name": "content",
                  "label": "任务内容",
                  "mode": "normal",
                  "id": "u:8dfadf06e6ae",
                  "minRows": 3,
                  "maxRows": 20,
                  "required": true
                },
                {
                  "type": "input-repeat",
                  "name": "task_due_time",
                  "label": "任务完成时间",
                  "mode": "normal",
                  "id": "u:c520ac7d5c17",
                  "options": "hourly,daily,weekly,monthly,yearly",
                  "required": true,
                  "validateApi": "",
                  "placeholder": "请选择"
                },
                {
                  "type": "select",
                  "name": "completion_conditions",
                  "label": "任务完成条件",
                  "mode": "normal",
                  "id": "u:e19162f2407f",
                  "options": [
                    {
                      "label": "人工点击完成按钮",
                      "value": 1
                    }
                  ],
                  "multiple": false,
                  "value": 1,
                  "required": true
                },
                {
                  "type": "nested-select",
                  "name": "user_id",
                  "label": "执行者",
                  "mode": "normal",
                  "id": "u:cf62f9bffada",
                  "onlyChildren": true,
                  "searchable": true,
                  "onlyLeaf": true,
                  "multiple": false,
                  "size": "lg",
                  "source": {
                    "url": "/api/admin/upms/sysUser/getFollowerList",
                    "method": "get",
                    "messages": {
                    },
                    "adaptor": "",
                    "dataType": "json"
                  },
                  "labelField": "label",
                  "valueField": "value",
                  "clearable": true,
                  "placeholder": "请选择执行者",
                  "hideNodePathLabel": true,
                  "required": true
                }
              ]
            }
          ],
          "id": "u:f060a93dcf72"
        },
        "id": "u:b599e5f93be6"
      }
    ],
    "id": "u:48118c859ba3"
  },
  "level": "link"
}