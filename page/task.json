{
  "type": "page",
  "body": [
    {
      "type": "crud",
      "id": "u:a7af374da67d",
      "syncLocation": false,
      "api": {
        "method": "get",
        "url": "/api/aio-program/individual_task/list",
        "messages": {
        },
        "requestAdaptor": "console.log('api', api);\nif (api.method === 'get') {\n  for (let key in api.query) {\n    if (api.query[key] === '') {\n      delete api.query[key];\n    } else {\n      console.log('api.query.' + key, api.query[key]);\n    }\n  }\n  api.url = api.url.split('?')[0] + '?' + new URLSearchParams(api.query);\n}\n\nreturn api;\n"
      },
      "bulkActions": [
      ],
      "itemActions": [
      ],
      "filterSettingSource": [
        "task_id",
        "patient_id",
        "user_id",
        "name",
        "content",
        "start_time",
        "end_time",
        "work_summary",
        "status"
      ],
      "features": [
        "create",
        "filter",
        "delete",
        "update",
        "view"
      ],
      "filterColumnCount": 3,
      "filterEnabledList": [
        {
          "label": "status",
          "value": "status"
        },
        {
          "label": "start_time",
          "value": "start_time"
        },
        {
          "label": "end_time",
          "value": "end_time"
        },
        {
          "label": "user_id",
          "value": "user_id"
        }
      ],
      "headerToolbar": [
        {
          "label": "新增任务",
          "type": "button",
          "actionType": "dialog",
          "level": "primary",
          "dialog": {
            "title": "新增",
            "body": [
              {
                "type": "form",
                "api": {
                  "method": "post",
                  "url": "/api/aio-program/task_rule"
                },
                "body": [
                  {
                    "type": "input-text",
                    "name": "name",
                    "label": "任务名称",
                    "mode": "normal",
                    "id": "u:3a559143d4d0",
                    "required": true
                  },
                  {
                    "type": "nested-select",
                    "name": "patient_ids",
                    "label": "目标客户",
                    "mode": "normal",
                    "id": "u:cf62f9bffada",
                    "onlyChildren": true,
                    "searchable": true,
                    "onlyLeaf": true,
                    "multiple": true,
                    "size": "lg",
                    "source": {
                      "url": "/api/admin/patientcenter/patient/list",
                      "method": "post",
                      "messages": {
                      },
                      "adaptor": "console.log(payload)\nreturn payload",
                      "dataType": "json",
                      "data": {
                        "patientDtoFilter": {
                          "patientName": "",
                          "nationalId": "",
                          "phone": "",
                          "patientId": "",
                          "dataPermissionsUser": ""
                        },
                        "pageParam": {
                          "pageNum": "1",
                          "pageSize": "1000"
                        }
                      }
                    },
                    "labelField": "patientName",
                    "valueField": "patientId",
                    "clearable": true,
                    "placeholder": "请选择目标患者",
                    "hideNodePathLabel": true,
                    "joinValues": false,
                    "required": true,
                    "extractValue": true
                  },
                  {
                    "type": "select",
                    "label": "触发条件",
                    "name": "trigger_type",
                    "options": [
                      {
                        "label": "定时型",
                        "value": 1
                      }
                    ],
                    "id": "u:0b717e64c033",
                    "mode": "normal",
                    "multiple": false,
                    "required": true,
                    "value": 1
                  },
                  {
                    "type": "input-datetime",
                    "name": "start_time",
                    "label": "开始时间",
                    "id": "u:98ee782be7d1",
                    "inputFormat": "YYYY-MM-DD HH:mm:ss",
                    "placeholder": "请选择日期以及时间",
                    "format": "YYYY-MM-DD HH:mm:ss",
                    "minDate": "",
                    "maxDate": "",
                    "value": "",
                    "mode": "normal",
                    "required": true
                  },
                  {
                    "id": "u:8deb319a96fa",
                    "title": "任务发送日期 (数字之间需要用、隔开)",
                    "collapsable": false,
                    "body": [
                      {
                        "type": "group",
                        "body": [
                          {
                            "type": "input-text",
                            "label": "任务生效后",
                            "name": "offset_date_values",
                            "id": "u:a3b16263a708",
                            "clearable": true
                          },
                          {
                            "type": "select",
                            "label": "",
                            "name": "offset_date_unit",
                            "options": [
                              {
                                "label": "天",
                                "value": 4
                              },
                              {
                                "label": "周",
                                "value": 5
                              },
                              {
                                "label": "月",
                                "value": 6
                              },
                              {
                                "label": "年",
                                "value": 7
                              }
                            ],
                            "id": "u:21d8793931a6",
                            "mode": "normal",
                            "multiple": false,
                            "clearable": true,
                            "value": 4
                          }
                        ],
                        "id": "u:d36a2e0a8939"
                      }
                    ],
                    "subFormMode": "",
                    "type": "fieldSet"
                  },
                  {
                    "type": "select",
                    "name": "repeating_rules",
                    "label": "重复规则",
                    "id": "u:ba434a14b747",
                    "mode": "normal",
                    "options": [
                      {
                        "label": "不重复",
                        "value": 0
                      },
                      {
                        "label": "每天",
                        "value": 1
                      },
                      {
                        "label": "每周",
                        "value": 2
                      }
                    ],
                    "multiple": false,
                    "value": 0
                  },
                  {
                    "type": "button-group-select",
                    "id": "u:811b3b103424",
                    "hiddenOn": "data.repeating_rules != 2",
                    "name": "weekly_repeat_days",
                    "label": "任务生效后",
                    "mode": "normal",
                    "inline": false,
                    "options": [
                      {
                        "label": "第1天",
                        "value": 1
                      },
                      {
                        "label": "第2天",
                        "value": 2
                      },
                      {
                        "label": "第3天",
                        "value": 3
                      },
                      {
                        "label": "第4天",
                        "value": 4
                      },
                      {
                        "label": "第5天",
                        "value": 5
                      },
                      {
                        "label": "第6天",
                        "value": 6
                      },
                      {
                        "label": "第7天",
                        "value": 7
                      }
                    ],
                    "multiple": true,
                    "joinValues": false,
                    "extractValue": true,
                    "clearValueOnHidden": true,
                    "static": false
                  },
                  {
                    "type": "input-group",
                    "label": "重复持续时长",
                    "mode": "normal",
                    "id": "u:54c735b0afd6",
                    "body": [
                      {
                        "type": "select",
                        "label": "文本",
                        "name": "duration_value",
                        "id": "u:7443d80b0039",
                        "options": [
                          {
                            "label": "1",
                            "value": 1
                          },
                          {
                            "label": "2",
                            "value": 2
                          },
                          {
                            "label": "3",
                            "value": 3
                          },
                          {
                            "label": "4",
                            "value": 4
                          },
                          {
                            "label": "5",
                            "value": 5
                          },
                          {
                            "label": "6",
                            "value": 6
                          },
                          {
                            "label": "7",
                            "value": 7
                          },
                          {
                            "label": "8",
                            "value": 8
                          },
                          {
                            "label": "9",
                            "value": 9
                          },
                          {
                            "label": "10",
                            "value": 10
                          },
                          {
                            "label": "11",
                            "value": 11
                          },
                          {
                            "label": "12",
                            "value": 12
                          },
                          {
                            "label": "13",
                            "value": 13
                          },
                          {
                            "label": "14",
                            "value": 14
                          },
                          {
                            "label": "15",
                            "value": 15
                          },
                          {
                            "label": "16",
                            "value": 16
                          },
                          {
                            "label": "17",
                            "value": 17
                          },
                          {
                            "label": "18",
                            "value": 18
                          },
                          {
                            "label": "19",
                            "value": 19
                          },
                          {
                            "label": "20",
                            "value": 20
                          },
                          {
                            "label": "21",
                            "value": 21
                          },
                          {
                            "label": "22",
                            "value": 22
                          },
                          {
                            "label": "23",
                            "value": 23
                          },
                          {
                            "label": "24",
                            "value": 24
                          },
                          {
                            "label": "25",
                            "value": 25
                          },
                          {
                            "label": "26",
                            "value": 26
                          },
                          {
                            "label": "27",
                            "value": 27
                          },
                          {
                            "label": "28",
                            "value": 28
                          },
                          {
                            "label": "29",
                            "value": 29
                          },
                          {
                            "label": "30",
                            "value": 30
                          }
                        ],
                        "multiple": false,
                        "value": 1
                      },
                      {
                        "type": "select",
                        "name": "duration_unit",
                        "options": [
                          {
                            "label": "天",
                            "value": 4
                          },
                          {
                            "label": "周",
                            "value": 5
                          },
                          {
                            "label": "月",
                            "value": 6
                          },
                          {
                            "label": "年",
                            "value": 7
                          }
                        ],
                        "value": 5,
                        "id": "u:6cd3bc0ea86c",
                        "multiple": false,
                        "required": true
                      }
                    ],
                    "required": true,
                    "hiddenOn": "data.repeating_rules == 0"
                  },
                  {
                    "type": "textarea",
                    "label": "任务内容",
                    "mode": "normal",
                    "id": "u:8dfadf06e6ae",
                    "name": "content",
                    "required": true,
                    "minRows": 3,
                    "maxRows": 20
                  },
                  {
                    "type": "input-group",
                    "label": "任务完成时间",
                    "mode": "normal",
                    "id": "u:54c735b0afd6",
                    "body": [
                      {
                        "type": "select",
                        "label": "文本",
                        "name": "task_due_time_value",
                        "id": "u:7443d80b0039",
                        "options": [
                          {
                            "label": "1",
                            "value": 1
                          },
                          {
                            "label": "2",
                            "value": 2
                          },
                          {
                            "label": "3",
                            "value": 3
                          },
                          {
                            "label": "4",
                            "value": 4
                          },
                          {
                            "label": "5",
                            "value": 5
                          },
                          {
                            "label": "6",
                            "value": 6
                          },
                          {
                            "label": "7",
                            "value": 7
                          },
                          {
                            "label": "8",
                            "value": 8
                          },
                          {
                            "label": "9",
                            "value": 9
                          },
                          {
                            "label": "10",
                            "value": 10
                          },
                          {
                            "label": "11",
                            "value": 11
                          },
                          {
                            "label": "12",
                            "value": 12
                          },
                          {
                            "label": "13",
                            "value": 13
                          },
                          {
                            "label": "14",
                            "value": 14
                          },
                          {
                            "label": "15",
                            "value": 15
                          },
                          {
                            "label": "16",
                            "value": 16
                          },
                          {
                            "label": "17",
                            "value": 17
                          },
                          {
                            "label": "18",
                            "value": 18
                          },
                          {
                            "label": "19",
                            "value": 19
                          },
                          {
                            "label": "20",
                            "value": 20
                          },
                          {
                            "label": "21",
                            "value": 21
                          },
                          {
                            "label": "22",
                            "value": 22
                          },
                          {
                            "label": "23",
                            "value": 23
                          },
                          {
                            "label": "24",
                            "value": 24
                          },
                          {
                            "label": "25",
                            "value": 25
                          },
                          {
                            "label": "26",
                            "value": 26
                          },
                          {
                            "label": "27",
                            "value": 27
                          },
                          {
                            "label": "28",
                            "value": 28
                          },
                          {
                            "label": "29",
                            "value": 29
                          },
                          {
                            "label": "30",
                            "value": 30
                          }
                        ],
                        "multiple": false,
                        "value": 1,
                        "required": true
                      },
                      {
                        "type": "select",
                        "name": "task_due_time_unit",
                        "options": [
                          {
                            "label": "时",
                            "value": 3
                          },
                          {
                            "label": "天",
                            "value": 4
                          },
                          {
                            "label": "周",
                            "value": 5
                          },
                          {
                            "label": "月",
                            "value": 6
                          },
                          {
                            "label": "年",
                            "value": 7
                          }
                        ],
                        "value": 3,
                        "id": "u:6cd3bc0ea86c",
                        "multiple": false,
                        "required": true
                      }
                    ],
                    "required": true
                  },
                  {
                    "type": "select",
                    "name": "completion_conditions",
                    "label": "任务完成条件",
                    "mode": "normal",
                    "id": "u:e19162f2407f",
                    "options": [
                      {
                        "label": "人工点击完成按钮",
                        "value": 1
                      }
                    ],
                    "required": true,
                    "multiple": false,
                    "value": 1
                  },
                  {
                    "type": "nested-select",
                    "name": "user_ids",
                    "label": "执行者",
                    "mode": "normal",
                    "id": "u:cf62f9bffada",
                    "multiple": true,
                    "required": true,
                    "onlyChildren": true,
                    "searchable": true,
                    "onlyLeaf": true,
                    "size": "lg",
                    "source": {
                      "url": "/api/admin/upms/sysUser/getFollowerList",
                      "method": "get",
                      "messages": {
                      },
                      "adaptor": "",
                      "dataType": "json"
                    },
                    "labelField": "label",
                    "valueField": "value",
                    "clearable": true,
                    "placeholder": "请选择执行者",
                    "hideNodePathLabel": true,
                    "joinValues": false,
                    "extractValue": true
                  }
                ],
                "id": "u:174002ed55b6",
                "wrapWithPanel": false
              }
            ],
            "type": "dialog",
            "id": "u:0dfa71db8ab5"
          },
          "id": "u:c59d84dde548"
        },
        "bulkActions"
      ],
      "filter": {
        "title": "查询条件",
        "columnCount": 3,
        "mode": "horizontal",
        "body": [
          {
            "type": "nested-select",
            "name": "patient_ids",
            "label": "用户",
            "id": "u:cf62f9bffada",
            "onlyChildren": true,
            "searchable": true,
            "onlyLeaf": true,
            "multiple": true,
            "size": "lg",
            "source": {
              "url": "/api/admin/patientcenter/patient/list",
              "method": "post",
              "messages": {
              },
              "adaptor": "console.log(payload)\nreturn payload",
              "dataType": "json",
              "data": {
                "patientDtoFilter": {
                  "patientName": "",
                  "nationalId": "",
                  "phone": "",
                  "patientId": "",
                  "dataPermissionsUser": ""
                },
                "pageParam": {
                  "pageNum": "1",
                  "pageSize": "1000"
                }
              }
            },
            "labelField": "patientName",
            "valueField": "patientId",
            "clearable": true,
            "placeholder": "请选择目标患者",
            "hideNodePathLabel": true,
            "joinValues": true
          },
          {
            "type": "input-date-range",
            "label": "开始时间",
            "name": "start_timeline",
            "id": "u:e9839f68a405",
            "startPlaceholder": "启始时间",
            "format": "YYYY-MM-DD",
            "utc": false,
            "autoFill": {
            },
            "validateOnChange": true,
            "inputFormat": "YYYY-MM-DD",
            "placeholder": "请选择日期范围",
            "minDate": "",
            "maxDate": "",
            "ranges": [
              "yesterday",
              "7daysago",
              "prevweek",
              "thismonth",
              "prevmonth",
              "prevquarter"
            ]
          },
          {
            "type": "select",
            "label": "状态",
            "name": "status",
            "id": "u:dae5a648d100",
            "options": [
              {
                "label": "进行中",
                "value": 1
              },
              {
                "label": "暂停中",
                "value": 2
              },
              {
                "label": "已过期",
                "value": 3
              },
              {
                "label": "未开始",
                "value": 4
              },
              {
                "label": "已完成",
                "value": 5
              }
            ],
            "multiple": false,
            "checkAll": true,
            "defaultCheckAll": false,
            "checkAllLabel": "",
            "clearable": true,
            "clearValueOnHidden": false,
            "hidden": false,
            "showInvalidMatch": false
          },
          {
            "type": "nested-select",
            "label": "执行者",
            "name": "executor_ids",
            "id": "u:cf62f9bffada",
            "clearable": true,
            "searchable": true,
            "multiple": true,
            "onlyChildren": true,
            "onlyLeaf": true,
            "size": "lg",
            "source": {
              "method": "get",
              "messages": {
              },
              "adaptor": "",
              "dataType": "json",
              "url": "/api/admin/upms/sysUser/getFollowerList"
            },
            "labelField": "label",
            "valueField": "value",
            "placeholder": "请选择执行者",
            "hideNodePathLabel": true,
            "joinValues": true,
            "extractValue": true,
            "checkAll": false
          },
          {
            "type": "input-text",
            "label": "任务名称",
            "name": "name",
            "id": "u:a1a2d85ebf39"
          },
          {
            "type": "input-text",
            "label": "任务内容",
            "name": "content",
            "id": "u:41bea61d1654"
          },
          {
            "type": "input-text",
            "label": "工作小结",
            "name": "work_summary",
            "id": "u:d2d63d947699"
          },
          {
            "type": "hidden",
            "name": "executor_type",
            "clearable": true,
            "searchable": false,
            "multiple": false,
            "options": [
              {
                "label": "运营人员",
                "value": 2
              }
            ],
            "value": 2,
            "id": "u:dae5a648d100",
            "label": "执行者类型"
          }
        ],
        "id": "u:bd7b28363b81",
        "resetAfterSubmit": false,
        "actions": [
          {
            "type": "button",
            "label": "查询",
            "onEvent": {
              "click": {
                "actions": [
                  {
                    "componentId": "u:bd7b28363b81",
                    "args": {
                    },
                    "actionType": "submit"
                  }
                ]
              }
            },
            "id": "u:8ae48a7ccc04",
            "level": "primary",
            "disabled": false
          },
          {
            "type": "button",
            "label": "重置",
            "onEvent": {
              "click": {
                "actions": [
                  {
                    "componentId": "u:bd7b28363b81",
                    "actionType": "reset"
                  }
                ]
              }
            },
            "id": "u:2481943a753b"
          }
        ],
        "wrapWithPanel": true
      },
      "messages": {
      },
      "mode": "table",
      "columns": [
        {
          "label": "ID",
          "type": "text",
          "name": "task_id",
          "id": "u:8bb3bf7eda9b"
        },
        {
          "type": "text",
          "label": "名称",
          "name": "name",
          "id": "u:87ac0bcacf88"
        },
        {
          "type": "text",
          "label": "状态",
          "name": "status_title",
          "id": "u:ca74909b7465"
        },
        {
          "label": "用户",
          "type": "text",
          "name": "patients",
          "id": "u:d6079d76bd43",
          "placeholder": "-"
        },
        {
          "label": "执行者",
          "type": "text",
          "name": "user_name",
          "id": "u:482f670dc102"
        },
        {
          "label": "创建者",
          "type": "text",
          "name": "create_name",
          "id": "u:7684e27158f4",
          "placeholder": "-"
        },
        {
          "label": "开始时间",
          "type": "text",
          "name": "start_time",
          "id": "u:70076b013ad0"
        },
        {
          "type": "text",
          "label": "创建时间",
          "id": "u:d6079d76bd43",
          "name": "create_time",
          "toggled": false
        },
        {
          "type": "operation",
          "label": "操作",
          "buttons": [
            {
              "label": "详情",
              "type": "button",
              "actionType": "dialog",
              "level": "link",
              "dialog": {
                "type": "dialog",
                "title": "查看详情",
                "body": [
                  {
                    "type": "form",
                    "id": "u:878387d82dde",
                    "api": "/api/aio-program/individual_task/completed",
                    "body": [
                      {
                        "type": "input-text",
                        "id": "u:0b320806e951",
                        "name": "task_id",
                        "label": "ID",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "inputControlClassName": "inputControlClassName-0b320806e951"
                      },
                      {
                        "type": "input-text",
                        "id": "u:3a559143d4d0",
                        "name": "name",
                        "label": "任务名称",
                        "mode": "normal",
                        "disabled": false,
                        "static": true,
                        "readOnly": false
                      },
                      {
                        "type": "nested-select",
                        "label": "目标客户",
                        "name": "patient_id",
                        "id": "u:cf62f9bffada",
                        "disabled": false,
                        "mode": "normal",
                        "static": true,
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "multiple": true,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/patientcenter/patient/list",
                          "method": "post",
                          "messages": {
                          },
                          "adaptor": "console.log(payload)\nreturn payload",
                          "dataType": "json",
                          "data": {
                            "patientDtoFilter": {
                              "patientName": "",
                              "nationalId": "",
                              "phone": "",
                              "patientId": "",
                              "dataPermissionsUser": ""
                            },
                            "pageParam": {
                              "pageNum": "1",
                              "pageSize": "1000"
                            }
                          }
                        },
                        "labelField": "patientName",
                        "valueField": "patientId",
                        "clearable": true,
                        "placeholder": "请选择目标患者",
                        "hideNodePathLabel": true,
                        "joinValues": true
                      },
                      {
                        "type": "select",
                        "name": "trigger_type",
                        "label": "触发条件",
                        "id": "u:0b717e64c033",
                        "disabled": false,
                        "mode": "normal",
                        "static": true,
                        "options": [
                          {
                            "label": "定时型",
                            "value": 1
                          }
                        ]
                      },
                      {
                        "type": "input-datetime",
                        "name": "start_time",
                        "label": "开始时间",
                        "id": "u:98ee782be7d1",
                        "disabled": false,
                        "mode": "normal",
                        "static": true,
                        "inputFormat": "YYYY-MM-DD HH:mm:ss",
                        "placeholder": "请选择日期以及时间",
                        "format": "YYYY-MM-DD HH:mm:ss",
                        "minDate": "",
                        "maxDate": "",
                        "value": ""
                      },
                      {
                        "type": "input-text",
                        "name": "content",
                        "label": "任务内容",
                        "id": "u:8dfadf06e6ae",
                        "disabled": false,
                        "mode": "normal",
                        "static": true
                      },
                      {
                        "type": "input-text",
                        "id": "u:8dfadf06e6ae",
                        "disabled": false,
                        "static": true,
                        "name": "task_due_time",
                        "label": "任务完成时间",
                        "mode": "normal"
                      },
                      {
                        "type": "input-text",
                        "name": "completion_conditions_title",
                        "disabled": false,
                        "label": "任务完成条件",
                        "mode": "normal",
                        "id": "u:8dfadf06e6ae",
                        "static": true
                      },
                      {
                        "type": "textarea",
                        "name": "work_summary",
                        "label": "工作小结",
                        "mode": "normal",
                        "id": "u:8dfadf06e6ae"
                      },
                      {
                        "type": "nested-select",
                        "name": "user_id",
                        "disabled": false,
                        "label": "执行者",
                        "mode": "normal",
                        "id": "u:cf62f9bffada",
                        "static": true,
                        "onlyChildren": true,
                        "searchable": true,
                        "onlyLeaf": true,
                        "multiple": false,
                        "size": "lg",
                        "source": {
                          "url": "/api/admin/upms/sysUser/getFollowerList",
                          "method": "get",
                          "messages": {
                          },
                          "adaptor": "",
                          "dataType": "json"
                        },
                        "labelField": "label",
                        "valueField": "value",
                        "clearable": true,
                        "placeholder": "请选择执行者",
                        "hideNodePathLabel": true
                      },
                      {
                        "type": "input-text",
                        "name": "create_user",
                        "disabled": false,
                        "label": "创建者",
                        "mode": "normal",
                        "id": "u:8dfadf06e612",
                        "static": true
                      },
                      {
                        "type": "input-text",
                        "name": "status_title",
                        "disabled": false,
                        "label": "状态",
                        "mode": "normal",
                        "id": "u:8dfadf192e6ae",
                        "static": true
                      }
                    ]
                  }
                ],
                "id": "u:e6b054986dc7",
                "actions": [
                  {
                    "type": "submit",
                    "label": "完成任务",
                    "id": "u:834ca42e09af"
                  }
                ],
                "showCloseButton": true,
                "closeOnEsc": false,
                "showErrorMsg": true,
                "showLoading": true,
                "size": "md"
              },
              "id": "u:a6ae663c78a7"
            },
            {
              "label": "编辑",
              "type": "button",
              "actionType": "dialog",
              "id": "u:182673fb61f8",
              "dialog": {
                "type": "dialog",
                "title": "提示",
                "body": [
                  {
                    "type": "tpl",
                    "tpl": "仅修改当前任务还是整体任务？",
                    "wrapperComponent": "",
                    "inline": false,
                    "id": "u:6a7b602110fb"
                  }
                ],
                "actions": [
                  {
                    "type": "button",
                    "actionType": "dialog",
                    "label": "修改当前任务",
                    "dialog": {
                      "type": "dialog",
                      "title": "编辑",
                      "body": [
                        {
                          "type": "form",
                          "id": "u:dc5e68da3597",
                          "api": "/api/aio-program/individual_task/edit",
                          "body": [
                            {
                              "type": "input-text",
                              "id": "u:0b320806e951",
                              "label": "ID",
                              "name": "task_id",
                              "mode": "normal",
                              "static": true,
                              "disabled": false
                            },
                            {
                              "type": "input-text",
                              "id": "u:3a559143d4d0",
                              "name": "name",
                              "label": "任务名称",
                              "mode": "normal",
                              "required": true
                            },
                            {
                              "type": "nested-select",
                              "label": "目标客户",
                              "name": "patient_id",
                              "id": "u:cf62f9bffada",
                              "mode": "normal",
                              "onlyChildren": true,
                              "searchable": true,
                              "onlyLeaf": true,
                              "multiple": false,
                              "size": "lg",
                              "source": {
                                "url": "/api/admin/patientcenter/patient/list",
                                "method": "post",
                                "messages": {
                                },
                                "adaptor": "console.log(payload)\nreturn payload",
                                "dataType": "json",
                                "data": {
                                  "patientDtoFilter": {
                                    "patientName": "",
                                    "nationalId": "",
                                    "phone": "",
                                    "patientId": "",
                                    "dataPermissionsUser": ""
                                  },
                                  "pageParam": {
                                    "pageNum": "1",
                                    "pageSize": "1000"
                                  }
                                }
                              },
                              "labelField": "patientName",
                              "valueField": "patientId",
                              "clearable": true,
                              "placeholder": "请选择目标患者",
                              "hideNodePathLabel": true,
                              "joinValues": true,
                              "required": true
                            },
                            {
                              "type": "select",
                              "name": "trigger_type",
                              "label": "触发条件",
                              "id": "u:0b717e64c033",
                              "mode": "normal",
                              "options": [
                                {
                                  "label": "定时型",
                                  "value": 1
                                }
                              ],
                              "multiple": false,
                              "required": true,
                              "value": 1
                            },
                            {
                              "type": "input-datetime",
                              "name": "start_time",
                              "label": "开始时间",
                              "id": "u:98ee782be7d1",
                              "mode": "normal",
                              "inputFormat": "YYYY-MM-DD HH:mm:ss",
                              "placeholder": "请选择日期以及时间",
                              "format": "YYYY-MM-DD HH:mm:ss",
                              "minDate": "",
                              "maxDate": "",
                              "value": "",
                              "required": true
                            },
                            {
                              "type": "textarea",
                              "name": "content",
                              "label": "任务内容",
                              "mode": "normal",
                              "id": "u:8dfadf06e6ae",
                              "minRows": 3,
                              "maxRows": 20,
                              "required": true
                            },
                            {
                              "type": "input-group",
                              "label": "任务完成时间",
                              "mode": "normal",
                              "id": "u:54c735b0afd6",
                              "body": [
                                {
                                  "type": "select",
                                  "label": "文本",
                                  "name": "task_due_time_value",
                                  "id": "u:7443d80b0039",
                                  "options": [
                                    {
                                      "label": "1",
                                      "value": 1
                                    },
                                    {
                                      "label": "2",
                                      "value": 2
                                    },
                                    {
                                      "label": "3",
                                      "value": 3
                                    },
                                    {
                                      "label": "4",
                                      "value": 4
                                    },
                                    {
                                      "label": "5",
                                      "value": 5
                                    },
                                    {
                                      "label": "6",
                                      "value": 6
                                    },
                                    {
                                      "label": "7",
                                      "value": 7
                                    },
                                    {
                                      "label": "8",
                                      "value": 8
                                    },
                                    {
                                      "label": "9",
                                      "value": 9
                                    },
                                    {
                                      "label": "10",
                                      "value": 10
                                    },
                                    {
                                      "label": "11",
                                      "value": 11
                                    },
                                    {
                                      "label": "12",
                                      "value": 12
                                    },
                                    {
                                      "label": "13",
                                      "value": 13
                                    },
                                    {
                                      "label": "14",
                                      "value": 14
                                    },
                                    {
                                      "label": "15",
                                      "value": 15
                                    },
                                    {
                                      "label": "16",
                                      "value": 16
                                    },
                                    {
                                      "label": "17",
                                      "value": 17
                                    },
                                    {
                                      "label": "18",
                                      "value": 18
                                    },
                                    {
                                      "label": "19",
                                      "value": 19
                                    },
                                    {
                                      "label": "20",
                                      "value": 20
                                    },
                                    {
                                      "label": "21",
                                      "value": 21
                                    },
                                    {
                                      "label": "22",
                                      "value": 22
                                    },
                                    {
                                      "label": "23",
                                      "value": 23
                                    },
                                    {
                                      "label": "24",
                                      "value": 24
                                    },
                                    {
                                      "label": "25",
                                      "value": 25
                                    },
                                    {
                                      "label": "26",
                                      "value": 26
                                    },
                                    {
                                      "label": "27",
                                      "value": 27
                                    },
                                    {
                                      "label": "28",
                                      "value": 28
                                    },
                                    {
                                      "label": "29",
                                      "value": 29
                                    },
                                    {
                                      "label": "30",
                                      "value": 30
                                    }
                                  ],
                                  "multiple": false,
                                  "value": 1
                                },
                                {
                                  "type": "select",
                                  "name": "task_due_time_unit",
                                  "options": [
                                    {
                                      "label": "天",
                                      "value": 4
                                    },
                                    {
                                      "label": "周",
                                      "value": 5
                                    },
                                    {
                                      "label": "月",
                                      "value": 6
                                    },
                                    {
                                      "label": "年",
                                      "value": 7
                                    }
                                  ],
                                  "value": "4",
                                  "id": "u:6cd3bc0ea86c"
                                }
                              ]
                            },
                            {
                              "type": "select",
                              "name": "completion_conditions",
                              "label": "任务完成条件",
                              "mode": "normal",
                              "id": "u:e19162f2407f",
                              "options": [
                                {
                                  "label": "人工点击完成按钮",
                                  "value": 1
                                }
                              ],
                              "multiple": false,
                              "value": 1,
                              "required": true
                            },
                            {
                              "type": "nested-select",
                              "name": "user_id",
                              "label": "执行者",
                              "mode": "normal",
                              "id": "u:cf62f9bffada",
                              "onlyChildren": true,
                              "searchable": true,
                              "onlyLeaf": true,
                              "multiple": false,
                              "size": "lg",
                              "source": {
                                "url": "/api/admin/upms/sysUser/getFollowerList",
                                "method": "get",
                                "messages": {
                                },
                                "adaptor": "",
                                "dataType": "json"
                              },
                              "labelField": "label",
                              "valueField": "value",
                              "clearable": true,
                              "placeholder": "请选择执行者",
                              "hideNodePathLabel": true,
                              "required": true
                            }
                          ],
                          "onEvent": {
                            "submitSucc": {
                              "weight": 0,
                              "actions": [
                                {
                                  "componentId": "u:a7af374da67d",
                                  "args": {
                                    "resetPage": false
                                  },
                                  "actionType": "reload",
                                  "data": null
                                },
                                {
                                  "componentId": "u:48118c859ba3",
                                  "actionType": "hidden"
                                }
                              ]
                            }
                          }
                        }
                      ],
                      "id": "u:f060a93dcf72",
                      "showCloseButton": true,
                      "closeOnEsc": false,
                      "showErrorMsg": true,
                      "showLoading": true,
                      "onEvent": {
                      }
                    },
                    "id": "u:4ceaa72cb347"
                  },
                  {
                    "type": "button",
                    "actionType": "dialog",
                    "label": "修改整体任务",
                    "dialog": {
                      "type": "dialog",
                      "title": "编辑",
                      "body": [
                        {
                          "type": "form",
                          "id": "u:dc5e68da3597",
                          "api": "/api/aio-program/task_rule/edit",
                          "body": [
                            {
                              "type": "input-text",
                              "id": "u:0b320806e951",
                              "label": "ID",
                              "name": "task_rule_id",
                              "mode": "normal",
                              "disabled": false,
                              "static": true
                            },
                            {
                              "type": "input-text",
                              "id": "u:3a559143d4d0",
                              "name": "name",
                              "label": "任务名称",
                              "mode": "normal",
                              "required": true,
                              "clearable": true
                            },
                            {
                              "type": "nested-select",
                              "label": "目标客户",
                              "name": "patient_ids",
                              "id": "u:cf62f9bffada",
                              "mode": "normal",
                              "onlyChildren": true,
                              "searchable": true,
                              "onlyLeaf": true,
                              "multiple": true,
                              "size": "lg",
                              "source": {
                                "url": "/api/admin/patientcenter/patient/list",
                                "method": "post",
                                "messages": {
                                },
                                "adaptor": "console.log(payload)\nreturn payload",
                                "dataType": "json",
                                "data": {
                                  "patientDtoFilter": {
                                    "patientName": "",
                                    "nationalId": "",
                                    "phone": "",
                                    "patientId": "",
                                    "dataPermissionsUser": ""
                                  },
                                  "pageParam": {
                                    "pageNum": "1",
                                    "pageSize": "1000"
                                  }
                                }
                              },
                              "labelField": "patientName",
                              "valueField": "patientId",
                              "clearable": true,
                              "placeholder": "请选择目标患者",
                              "hideNodePathLabel": true,
                              "joinValues": false,
                              "required": true,
                              "extractValue": true
                            },
                            {
                              "type": "select",
                              "name": "trigger_type",
                              "label": "触发条件",
                              "id": "u:0b717e64c033",
                              "mode": "normal",
                              "options": [
                                {
                                  "label": "定时型",
                                  "value": 1
                                }
                              ],
                              "multiple": false,
                              "required": true,
                              "value": 1
                            },
                            {
                              "type": "input-datetime",
                              "name": "start_time",
                              "label": "开始时间",
                              "id": "u:98ee782be7d1",
                              "mode": "normal",
                              "inputFormat": "YYYY-MM-DD HH:mm:ss",
                              "placeholder": "请选择日期以及时间",
                              "format": "YYYY-MM-DD HH:mm:ss",
                              "minDate": "",
                              "maxDate": "",
                              "value": "",
                              "required": true
                            },
                            {
                              "type": "fieldSet",
                              "id": "u:8deb319a96fa",
                              "title": "任务发送日期 (数字之间需要用、隔开)",
                              "collapsable": false,
                              "body": [
                                {
                                  "type": "group",
                                  "body": [
                                    {
                                      "type": "input-text",
                                      "label": "任务生效后",
                                      "name": "offset_date_values",
                                      "id": "u:a3b16263a708",
                                      "clearable": true
                                    },
                                    {
                                      "type": "select",
                                      "label": "",
                                      "name": "offset_date_unit",
                                      "options": [
                                        {
                                          "label": "天",
                                          "value": 4
                                        },
                                        {
                                          "label": "周",
                                          "value": 5
                                        },
                                        {
                                          "label": "月",
                                          "value": 6
                                        },
                                        {
                                          "label": "年",
                                          "value": 7
                                        }
                                      ],
                                      "id": "u:21d8793931a6",
                                      "mode": "normal",
                                      "multiple": false,
                                      "clearable": true,
                                      "value": 4
                                    }
                                  ],
                                  "id": "u:d36a2e0a8939"
                                }
                              ],
                              "subFormMode": ""
                            },
                            {
                              "type": "select",
                              "name": "repeating_rules",
                              "label": "重复规则",
                              "mode": "normal",
                              "id": "u:ba434a14b747",
                              "options": [
                                {
                                  "label": "不重复",
                                  "value": 0
                                },
                                {
                                  "label": "每天",
                                  "value": 1
                                },
                                {
                                  "label": "每周",
                                  "value": 2
                                }
                              ],
                              "multiple": false,
                              "value": 0
                            },
                            {
                              "type": "button-group-select",
                              "id": "u:811b3b103424",
                              "hiddenOn": "data.repeating_rules != 2",
                              "name": "weekly_repeat_days",
                              "label": "任务生效后",
                              "mode": "normal",
                              "options": [
                                {
                                  "label": "第1天",
                                  "value": 1
                                },
                                {
                                  "label": "第2天",
                                  "value": 2
                                },
                                {
                                  "label": "第3天",
                                  "value": 3
                                },
                                {
                                  "label": "第4天",
                                  "value": 4
                                },
                                {
                                  "label": "第5天",
                                  "value": 5
                                },
                                {
                                  "label": "第6天",
                                  "value": 6
                                },
                                {
                                  "label": "第7天",
                                  "value": 7
                                }
                              ],
                              "inline": false,
                              "multiple": true,
                              "joinValues": false,
                              "extractValue": true,
                              "clearValueOnHidden": true,
                              "static": false
                            },
                            {
                              "type": "input-group",
                              "label": "重复持续时长",
                              "mode": "normal",
                              "id": "u:54c735b0afd6",
                              "body": [
                                {
                                  "type": "select",
                                  "label": "文本",
                                  "name": "duration_value",
                                  "id": "u:7443d80b0039",
                                  "options": [
                                    {
                                      "label": "1",
                                      "value": 1
                                    },
                                    {
                                      "label": "2",
                                      "value": 2
                                    },
                                    {
                                      "label": "3",
                                      "value": 3
                                    },
                                    {
                                      "label": "4",
                                      "value": 4
                                    },
                                    {
                                      "label": "5",
                                      "value": 5
                                    },
                                    {
                                      "label": "6",
                                      "value": 6
                                    },
                                    {
                                      "label": "7",
                                      "value": 7
                                    },
                                    {
                                      "label": "8",
                                      "value": 8
                                    },
                                    {
                                      "label": "9",
                                      "value": 9
                                    },
                                    {
                                      "label": "10",
                                      "value": 10
                                    },
                                    {
                                      "label": "11",
                                      "value": 11
                                    },
                                    {
                                      "label": "12",
                                      "value": 12
                                    },
                                    {
                                      "label": "13",
                                      "value": 13
                                    },
                                    {
                                      "label": "14",
                                      "value": 14
                                    },
                                    {
                                      "label": "15",
                                      "value": 15
                                    },
                                    {
                                      "label": "16",
                                      "value": 16
                                    },
                                    {
                                      "label": "17",
                                      "value": 17
                                    },
                                    {
                                      "label": "18",
                                      "value": 18
                                    },
                                    {
                                      "label": "19",
                                      "value": 19
                                    },
                                    {
                                      "label": "20",
                                      "value": 20
                                    },
                                    {
                                      "label": "21",
                                      "value": 21
                                    },
                                    {
                                      "label": "22",
                                      "value": 22
                                    },
                                    {
                                      "label": "23",
                                      "value": 23
                                    },
                                    {
                                      "label": "24",
                                      "value": 24
                                    },
                                    {
                                      "label": "25",
                                      "value": 25
                                    },
                                    {
                                      "label": "26",
                                      "value": 26
                                    },
                                    {
                                      "label": "27",
                                      "value": 27
                                    },
                                    {
                                      "label": "28",
                                      "value": 28
                                    },
                                    {
                                      "label": "29",
                                      "value": 29
                                    },
                                    {
                                      "label": "30",
                                      "value": 30
                                    }
                                  ],
                                  "multiple": false,
                                  "value": 1
                                },
                                {
                                  "type": "select",
                                  "name": "duration_unit",
                                  "options": [
                                    {
                                      "label": "天",
                                      "value": 4
                                    },
                                    {
                                      "label": "周",
                                      "value": 5
                                    },
                                    {
                                      "label": "月",
                                      "value": 6
                                    },
                                    {
                                      "label": "年",
                                      "value": 7
                                    }
                                  ],
                                  "value": 5,
                                  "id": "u:6cd3bc0ea86c",
                                  "multiple": false,
                                  "required": true
                                }
                              ],
                              "required": true,
                              "hiddenOn": "data.repeating_rules == 0"
                            },
                            {
                              "type": "textarea",
                              "label": "任务内容",
                              "mode": "normal",
                              "id": "u:8dfadf06e6ae",
                              "name": "content",
                              "required": true,
                              "minRows": 3,
                              "maxRows": 20
                            },
                            {
                              "type": "input-group",
                              "label": "任务完成时间",
                              "mode": "normal",
                              "id": "u:54c735b0afd6",
                              "body": [
                                {
                                  "type": "select",
                                  "label": "文本",
                                  "name": "task_due_time_value",
                                  "id": "u:7443d80b0039",
                                  "options": [
                                    {
                                      "label": "1",
                                      "value": 1
                                    },
                                    {
                                      "label": "2",
                                      "value": 2
                                    },
                                    {
                                      "label": "3",
                                      "value": 3
                                    },
                                    {
                                      "label": "4",
                                      "value": 4
                                    },
                                    {
                                      "label": "5",
                                      "value": 5
                                    },
                                    {
                                      "label": "6",
                                      "value": 6
                                    },
                                    {
                                      "label": "7",
                                      "value": 7
                                    },
                                    {
                                      "label": "8",
                                      "value": 8
                                    },
                                    {
                                      "label": "9",
                                      "value": 9
                                    },
                                    {
                                      "label": "10",
                                      "value": 10
                                    },
                                    {
                                      "label": "11",
                                      "value": 11
                                    },
                                    {
                                      "label": "12",
                                      "value": 12
                                    },
                                    {
                                      "label": "13",
                                      "value": 13
                                    },
                                    {
                                      "label": "14",
                                      "value": 14
                                    },
                                    {
                                      "label": "15",
                                      "value": 15
                                    },
                                    {
                                      "label": "16",
                                      "value": 16
                                    },
                                    {
                                      "label": "17",
                                      "value": 17
                                    },
                                    {
                                      "label": "18",
                                      "value": 18
                                    },
                                    {
                                      "label": "19",
                                      "value": 19
                                    },
                                    {
                                      "label": "20",
                                      "value": 20
                                    },
                                    {
                                      "label": "21",
                                      "value": 21
                                    },
                                    {
                                      "label": "22",
                                      "value": 22
                                    },
                                    {
                                      "label": "23",
                                      "value": 23
                                    },
                                    {
                                      "label": "24",
                                      "value": 24
                                    },
                                    {
                                      "label": "25",
                                      "value": 25
                                    },
                                    {
                                      "label": "26",
                                      "value": 26
                                    },
                                    {
                                      "label": "27",
                                      "value": 27
                                    },
                                    {
                                      "label": "28",
                                      "value": 28
                                    },
                                    {
                                      "label": "29",
                                      "value": 29
                                    },
                                    {
                                      "label": "30",
                                      "value": 30
                                    }
                                  ],
                                  "multiple": false,
                                  "value": 1
                                },
                                {
                                  "type": "select",
                                  "name": "task_due_time_unit",
                                  "options": [
                                    {
                                      "label": "时",
                                      "value": 3
                                    },
                                    {
                                      "label": "天",
                                      "value": 4
                                    },
                                    {
                                      "label": "周",
                                      "value": 5
                                    },
                                    {
                                      "label": "月",
                                      "value": 6
                                    },
                                    {
                                      "label": "年",
                                      "value": 7
                                    }
                                  ],
                                  "value": "4",
                                  "id": "u:6cd3bc0ea86c"
                                }
                              ]
                            },
                            {
                              "type": "select",
                              "name": "completion_conditions",
                              "label": "任务完成条件",
                              "mode": "normal",
                              "id": "u:e19162f2407f",
                              "options": [
                                {
                                  "label": "人工点击完成按钮",
                                  "value": 1
                                }
                              ],
                              "required": true,
                              "multiple": false,
                              "value": 1
                            },
                            {
                              "type": "nested-select",
                              "name": "user_id",
                              "label": "执行者",
                              "mode": "normal",
                              "id": "u:cf62f9bffada",
                              "multiple": false,
                              "required": true,
                              "onlyChildren": true,
                              "searchable": true,
                              "onlyLeaf": true,
                              "size": "lg",
                              "source": {
                                "url": "/api/admin/upms/sysUser/getFollowerList",
                                "method": "get",
                                "messages": {
                                },
                                "adaptor": "",
                                "dataType": "json"
                              },
                              "labelField": "label",
                              "valueField": "value",
                              "clearable": true,
                              "placeholder": "请选择执行者",
                              "hideNodePathLabel": true
                            }
                          ],
                          "initApi": {
                            "method": "get",
                            "url": "/api/aio-program/task_rule/$task_rule_id/detail",
                            "messages": {
                            },
                            "replaceData": true
                          },
                          "title": "编辑整体任务",
                          "silentPolling": false,
                          "onEvent": {
                            "submitSucc": {
                              "weight": 0,
                              "actions": [
                                {
                                  "componentId": "u:a7af374da67d",
                                  "args": {
                                    "resetPage": false
                                  },
                                  "actionType": "reload",
                                  "data": null
                                },
                                {
                                  "componentId": "u:48118c859ba3",
                                  "actionType": "hidden"
                                }
                              ]
                            }
                          }
                        }
                      ],
                      "id": "u:f060a93dcf72",
                      "showCloseButton": true,
                      "closeOnEsc": false,
                      "showErrorMsg": true,
                      "showLoading": true,
                      "onEvent": {
                      }
                    },
                    "id": "u:b599e5f93be6"
                  }
                ],
                "id": "u:48118c859ba3",
                "showCloseButton": true,
                "closeOnEsc": false,
                "showErrorMsg": true,
                "showLoading": true,
                "onEvent": {
                  "cancel": {
                    "weight": 0,
                    "actions": [
                    ]
                  }
                }
              },
              "level": "link",
              "hiddenOn": "data.status == 5"
            },
            {
              "label": "完成",
              "type": "button",
              "actionType": "ajax",
              "level": "link",
              "id": "u:72ce14d7b638",
              "confirmText": "确认当前任务已完成？",
              "api": {
                "method": "post",
                "url": "/api/aio-program/individual_task/completed",
                "body": {
                  "task_id": "${task_id}"
                }
              },
              "hiddenOn": "data.status == 5||data.status == 4"
            },
            {
              "type": "button",
              "label": "删除",
              "actionType": "dialog",
              "level": "link",
              "className": "text-danger",
              "id": "u:72ce14d7b638",
              "dialog": {
                "type": "dialog",
                "title": "提示",
                "body": [
                  {
                    "type": "tpl",
                    "tpl": "仅删除当前任务还是删除全部全部？",
                    "wrapperComponent": "",
                    "inline": false,
                    "id": "u:6a7b602110fb"
                  }
                ],
                "actions": [
                  {
                    "type": "button",
                    "label": "删除当前任务",
                    "id": "u:ef7d52424189",
                    "close": true,
                    "onEvent": {
                      "click": {
                        "weight": 0,
                        "actions": [
                          {
                            "args": {
                              "options": {
                              },
                              "api": {
                                "url": "/api/aio-program/task_rule/delete",
                                "method": "post",
                                "messages": {
                                },
                                "dataType": "json",
                                "data": {
                                  "task_id": "$task_id",
                                  "remove_all": 0
                                }
                              }
                            },
                            "actionType": "ajax",
                            "outputVar": "responseResult"
                          },
                          {
                            "args": {
                              "resetPage": false
                            },
                            "actionType": "reload",
                            "componentId": "u:a7af374da67d",
                            "data": null
                          }
                        ]
                      }
                    }
                  },
                  {
                    "type": "button",
                    "label": "删除全部任务",
                    "id": "u:716189444a40",
                    "close": true,
                    "onEvent": {
                      "click": {
                        "weight": 0,
                        "actions": [
                          {
                            "actionType": "ajax",
                            "args": {
                              "options": {
                              },
                              "api": {
                                "url": "/api/aio-program/task_rule/delete",
                                "method": "post",
                                "messages": {
                                },
                                "dataType": "json",
                                "data": {
                                  "task_id": "$task_id",
                                  "remove_all": 1
                                }
                              }
                            },
                            "outputVar": "responseResult"
                          },
                          {
                            "args": {
                              "resetPage": false
                            },
                            "actionType": "reload",
                            "componentId": "u:a7af374da67d",
                            "data": null
                          }
                        ]
                      }
                    }
                  }
                ],
                "id": "u:d69a39011695"
              },
              "onEvent": {
                "click": {
                  "weight": 0,
                  "actions": [
                  ]
                }
              }
            }
          ],
          "id": "u:e5f978fd047c"
        }
      ],
      "footerToolbar": [
        {
          "type": "statistics",
          "align": "left"
        },
        {
          "type": "pagination",
          "align": "right"
        },
        {
          "type": "switch-per-page",
          "tpl": "内容",
          "wrapperComponent": "",
          "align": "right"
        }
      ],
      "perPageAvailable": [
        10,
        20,
        30
      ],
      "alwaysShowPagination": true,
      "perPageField": "page_size",
      "pageField": "page",
      "perPage": 20
    }
  ],
  "id": "u:66f83a04abd7",
  "asideResizor": false,
  "style": {
    "boxShadow": " 0px 0px 0px 0px transparent"
  },
  "pullRefresh": {
    "disabled": true
  },
  "title": "任务列表",
  "regions": [
    "body",
    "aside",
    "header",
    "toolbar"
  ]
}